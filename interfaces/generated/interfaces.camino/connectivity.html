
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Neuroimaging in Python - Pipelines and Interfaces &#8212; nipy pipeline and interfaces package</title>
    <link rel="stylesheet" href="../../../_static/nipype.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="author" title="About these documents" href="../../../about.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
 
<meta name="keywords" content="nipype, neuroimaging, pipeline, workflow, parallel, python, neuroscience">
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-339450-7', 'nipy.org/nipype');
  ga('send', 'pageview');
</script>
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'nipy/nipype'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>

  </head><body>
<div class="header-wrapper">
    <div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
            <a href="../../../index.html">
            <img src="../../../_static/nipype-banner-bg.png" alt="NIPY logo"  border="0" />
        <div style="margin-top: 1em;
                border-top: 1px solid #AAA;
                border-bottom: 1px solid #AAA;
                border-radius: 5px;
                padding: 3px 1em;">
            <link rel="stylesheet" href="http://www.google.com/cse/style/look/default.css" type="text/css" />
<style type="text/css">
    a.navbar {
    color: ;
    letter-spacing: .05em;
    font-weight: bold;
        }
</style>

<a class="navbar" href="../../../index.html">Home</a> ·
<a class="navbar" href="../../../quickstart.html">Quickstart</a> ·
<a class="navbar" href="../../../documentation.html">Documentation</a> ·
<a class="navbar" href="../../../about.html">About</a> ·
<a class="navbar" href="http://nipy.org">Nipy</a>

        </div>
    </div>
</div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<style type="text/css">
    input.gsc-input {
        border-color: #BCCDF0;
    }
    input.gsc-search-button {
        border-color: #666666;
        background-color: #CECECE;
        padding: 0;
    }
    div.sphinxsidebar .tile {
        border: 1px solid #D1DDE2;
        border-radius: 10px;
        background-color: #E1E8EC;
        padding-left: 0.5em;
        margin: 1em 0;
    }
    div.sphinxsidebar input[type="text"] {
        width: 100%;
    }
    div.sphinxsidebar input[type="submit"] {
        width: 100%;
    }
</style>

<div class="sidebarblock">
    <script>
      (function() {
        var cx = '010960497803984932957:u8pmqf7fdoq';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:search></gcse:search>
</div>

  <h3><a href="../../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">interfaces.camino.connectivity</a><ul>
<li><a class="reference internal" href="#conmat">Conmat</a><ul>
<li><a class="reference internal" href="#example-1">Example 1</a></li>
<li><a class="reference internal" href="#id1">Example 1</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<style type="text/css">
    div.sphinxsidebar .tile {
        border: 1px solid #D1DDE2;
        border-radius: 10px;
        background-color: #E1E8EC;
        padding-left: 0.5em;
        margin: 1em 0;
    }
</style>
<div class="sidebarblock">
    <h3>Versions</h3>

    <div class="tile">
        <table style="width: 100%;">
            <tr style="font-weight: bold;">
                <td align="left">Release</td><td align="right">Devel</td>
            </tr>
            <tr>
                <td align="left">1.1.3</td><td align="right">1.1.4-dev+g93c475b</td>
            </tr>
            <tr>
                <td align="left"><a href="../../../users/install.html">Download</a></td>
                <td align="right"><a href="https://github.com/nipy/nipype">Github</a></td>
            </tr>
        </table>
    </div>
</div>


<script type="text/javascript">
    (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
</script>

<h3>Links</h3>

<ul>
    <li>Docs: <a href="http://nipy.org/nipype">Stable</a> · <a href="http://nipype.readthedocs.org/en/latest/">Dev</a></li>
    <li>Code: <a href="http://github.com/nipy/nipype">Github</a> · <a href="http://github.com/nipy/nipype/issues">Bugs-Requests</a></li>
    <li>Forum: <a href="https://neurostars.org/search?q=nipype">User</a> · <a href="https://mail.python.org/mailman/listinfo/neuroimaging">Developer</a></li>
    <li>Chat: <a href="https://gitter.im/nipy/nipype">Gitter</a> · <a href="https://brainhack.slack.com/messages/C1FR76RAL">Slack</a></li>
    <li><a href="about.html#funding">Funding</a> · <a href="http://nipy.org/software/license/index.html"><img src="https://img.shields.io/pypi/l/nipype.svg" alt="License"></a></li>
    <li><a href="https://travis-ci.org/nipy/nipype"><img src="https://travis-ci.org/nipy/nipype.png?branch=master" alt="travis"></a> · <a href='https://codecov.io/gh/nipy/nipype'><img src='https://codecov.io/gh/nipy/nipype/branch/master/graph/badge.svg' alt='Coverage Status' /></a></li>
    <a href='https://pypi.python.org/pypi/nipype/'><img src='https://img.shields.io/pypi/pyversions/nipype.svg' alt='Python Versions' /></a></li>
</ul>

 
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="interfaces-camino-connectivity">
<h1>interfaces.camino.connectivity<a class="headerlink" href="#interfaces-camino-connectivity" title="Permalink to this headline">¶</a></h1>
<span class="target" id="nipype-interfaces-camino-connectivity-conmat"></span><div class="section" id="conmat">
<span id="index-0"></span><h2>Conmat<a class="headerlink" href="#conmat" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/camino/connectivity.py#L79">Link to code</a></p>
<p>Wraps command <strong>conmat</strong></p>
<p>Creates  a  connectivity  matrix  using a 3D label image (the target image)
and a set of streamlines. The connectivity matrix records how many stream-
lines connect each pair of targets, and optionally the mean tractwise
statistic (eg tract-averaged FA, or length).</p>
<p>The output is a comma separated variable file or files. The first row of
the output matrix is label names. Label names may be defined by the user,
otherwise  they  are assigned based on label intensity.</p>
<p>Starting  from the seed point, we move along the streamline until we find
a point in a labeled region. This is done in both directions from the seed
point. Streamlines are counted if they connect two target regions, one on
either side of the seed point. Only the labeled region closest to the seed
is counted, for example if the  input contains two streamlines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="p">:</span> <span class="n">A</span><span class="o">-----</span><span class="n">B</span><span class="o">------</span><span class="n">SEED</span><span class="o">---</span><span class="n">C</span>
<span class="mi">2</span><span class="p">:</span> <span class="n">A</span><span class="o">--------</span><span class="n">SEED</span><span class="o">-----------</span>
</pre></div>
</div>
<p>then the output would be</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span>
<span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
<span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span>
<span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span>
</pre></div>
</div>
<p>There  are  zero  connections  to A because in streamline 1, the connection
to B is closer to the seed than the connection to A, and in streamline 2
there is no region reached in the other direction.</p>
<p>The connected target regions can have the same label, as long as the seed
point is outside of the labeled region and both ends connect to the same
label (which may  be in different locations). Therefore this is allowed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">------</span><span class="n">SEED</span><span class="o">-------</span><span class="n">A</span>
</pre></div>
</div>
<p>Such fibers will add to the diagonal elements of the matrix. To remove
these entries, run procstreamlines with -endpointfile before running conmat.</p>
<p>If the seed point is inside a labled region, it counts as one end of the
connection.  So</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">----</span><span class="p">[</span><span class="n">SEED</span> <span class="n">inside</span> <span class="n">A</span><span class="p">]</span><span class="o">---------</span><span class="n">B</span>
</pre></div>
</div>
<p>counts as a connection between A and B, while</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span><span class="o">----</span><span class="p">[</span><span class="n">SEED</span> <span class="n">inside</span> <span class="n">A</span><span class="p">]</span><span class="o">---------</span><span class="n">B</span>
</pre></div>
</div>
<p>counts as a connection between A and C, because C is closer to the seed point.</p>
<p>In all cases, distance to the seed point is defined along the streamline path.</p>
<div class="section" id="example-1">
<h3>Example 1<a class="headerlink" href="#example-1" title="Permalink to this headline">¶</a></h3>
<p>To create a standard connectivity matrix based on streamline counts.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">nipype.interfaces.camino</span> <span class="k">as</span> <span class="nn">cam</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conmat</span> <span class="o">=</span> <span class="n">cam</span><span class="o">.</span><span class="n">Conmat</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conmat</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;tracts.Bdouble&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conmat</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">target_file</span> <span class="o">=</span> <span class="s1">&#39;atlas.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conmat</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>        <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h3>Example 1<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>To create a standard connectivity matrix and mean tractwise FA statistics.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">nipype.interfaces.camino</span> <span class="k">as</span> <span class="nn">cam</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conmat</span> <span class="o">=</span> <span class="n">cam</span><span class="o">.</span><span class="n">Conmat</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conmat</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;tracts.Bdouble&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conmat</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">target_file</span> <span class="o">=</span> <span class="s1">&#39;atlas.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conmat</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">scalar_file</span> <span class="o">=</span> <span class="s1">&#39;fa.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conmat</span><span class="o">.</span><span class="n">tract_stat</span>         <span class="o">=</span> <span class="s1">&#39;mean&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conmat</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>        <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        Streamlines as generated by the Track interface
        flag: -inputfile %s
target_file: (an existing file name)
        An image containing targets, as used in ProcStreamlines interface.
        flag: -targetfile %s

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
output_root: (a file name)
        filename root prepended onto the names of the output files. The
        extension will be determined from the input.
        flag: -outputroot %s
scalar_file: (an existing file name)
        Optional scalar file for computing tract-based statistics. Must be
        in the same space as the target file.
        flag: -scalarfile %s
        requires: tract_stat
targetname_file: (an existing file name)
        Optional names of targets. This file should contain one entry per
        line, with the target intensity followed by the name, separated by
        white space. For example: 1 some_brain_region 2 some_other_region
        These names will be used in the output. The names themselves should
        not contain spaces or commas. The labels may be in any order but the
        output matrices will be ordered by label intensity.
        flag: -targetnamefile %s
tract_prop: (&#39;length&#39; or &#39;endpointsep&#39;)
        Tract property average to compute in the connectivity matrix. See
        TractStats for details.
        flag: -tractstat %s
        mutually_exclusive: tract_stat
tract_stat: (&#39;mean&#39; or &#39;min&#39; or &#39;max&#39; or &#39;sum&#39; or &#39;median&#39; or &#39;var&#39;)
        Tract statistic to use. See TractStats for other options.
        flag: -tractstat %s
        mutually_exclusive: tract_prop
        requires: scalar_file
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conmat_sc</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">Connectivity</span> <span class="n">matrix</span> <span class="ow">in</span> <span class="n">CSV</span> <span class="n">file</span><span class="o">.</span>
<span class="n">conmat_ts</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">Tract</span> <span class="n">statistics</span> <span class="ow">in</span> <span class="n">CSV</span> <span class="n">file</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2009-18, Neuroimaging in Python team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1.
    </div>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
</div>

  </body>
</html>