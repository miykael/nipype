
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Neuroimaging in Python - Pipelines and Interfaces &#8212; nipy pipeline and interfaces package</title>
    <link rel="stylesheet" href="../../../_static/nipype.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="author" title="About these documents" href="../../../about.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
 
<meta name="keywords" content="nipype, neuroimaging, pipeline, workflow, parallel, python, neuroscience">
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-339450-7', 'nipy.org/nipype');
  ga('send', 'pageview');
</script>
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'nipy/nipype'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>

  </head><body>
<div class="header-wrapper">
    <div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
            <a href="../../../index.html">
            <img src="../../../_static/nipype-banner-bg.png" alt="NIPY logo"  border="0" />
        <div style="margin-top: 1em;
                border-top: 1px solid #AAA;
                border-bottom: 1px solid #AAA;
                border-radius: 5px;
                padding: 3px 1em;">
            <link rel="stylesheet" href="http://www.google.com/cse/style/look/default.css" type="text/css" />
<style type="text/css">
    a.navbar {
    color: ;
    letter-spacing: .05em;
    font-weight: bold;
        }
</style>

<a class="navbar" href="../../../index.html">Home</a> ·
<a class="navbar" href="../../../quickstart.html">Quickstart</a> ·
<a class="navbar" href="../../../documentation.html">Documentation</a> ·
<a class="navbar" href="../../../about.html">About</a> ·
<a class="navbar" href="http://nipy.org">Nipy</a>

        </div>
    </div>
</div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<style type="text/css">
    input.gsc-input {
        border-color: #BCCDF0;
    }
    input.gsc-search-button {
        border-color: #666666;
        background-color: #CECECE;
        padding: 0;
    }
    div.sphinxsidebar .tile {
        border: 1px solid #D1DDE2;
        border-radius: 10px;
        background-color: #E1E8EC;
        padding-left: 0.5em;
        margin: 1em 0;
    }
    div.sphinxsidebar input[type="text"] {
        width: 100%;
    }
    div.sphinxsidebar input[type="submit"] {
        width: 100%;
    }
</style>

<div class="sidebarblock">
    <script>
      (function() {
        var cx = '010960497803984932957:u8pmqf7fdoq';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:search></gcse:search>
</div>

  <h3><a href="../../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">interfaces.afni.preprocess</a><ul>
<li><a class="reference internal" href="#alignepianatpy">AlignEpiAnatPy</a><ul>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#allineate">Allineate</a><ul>
<li><a class="reference internal" href="#id1">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#autotlrc">AutoTLRC</a><ul>
<li><a class="reference internal" href="#id2">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#autotcorrelate">AutoTcorrelate</a><ul>
<li><a class="reference internal" href="#id3">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#automask">Automask</a><ul>
<li><a class="reference internal" href="#id4">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#bandpass">Bandpass</a><ul>
<li><a class="reference internal" href="#id5">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#blurinmask">BlurInMask</a><ul>
<li><a class="reference internal" href="#id6">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#blurtofwhm">BlurToFWHM</a><ul>
<li><a class="reference internal" href="#id7">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cliplevel">ClipLevel</a><ul>
<li><a class="reference internal" href="#id8">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#degreecentrality">DegreeCentrality</a><ul>
<li><a class="reference internal" href="#id9">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#despike">Despike</a><ul>
<li><a class="reference internal" href="#id10">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#detrend">Detrend</a><ul>
<li><a class="reference internal" href="#id11">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ecm">ECM</a><ul>
<li><a class="reference internal" href="#id12">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fim">Fim</a><ul>
<li><a class="reference internal" href="#id13">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fourier">Fourier</a><ul>
<li><a class="reference internal" href="#id14">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#hist">Hist</a><ul>
<li><a class="reference internal" href="#id15">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#lfcd">LFCD</a><ul>
<li><a class="reference internal" href="#id16">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#maskave">Maskave</a><ul>
<li><a class="reference internal" href="#id17">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#means">Means</a><ul>
<li><a class="reference internal" href="#id18">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#outliercount">OutlierCount</a><ul>
<li><a class="reference internal" href="#id19">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#qualityindex">QualityIndex</a><ul>
<li><a class="reference internal" href="#id22">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#qwarp">Qwarp</a><ul>
<li><a class="reference internal" href="#id24">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#qwarpplusminus">QwarpPlusMinus</a><ul>
<li><a class="reference internal" href="#id26">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#roistats">ROIStats</a><ul>
<li><a class="reference internal" href="#id27">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#retroicor">Retroicor</a><ul>
<li><a class="reference internal" href="#id28">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#seg">Seg</a><ul>
<li><a class="reference internal" href="#id29">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#skullstrip">SkullStrip</a><ul>
<li><a class="reference internal" href="#id30">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tcorr1d">TCorr1D</a></li>
<li><a class="reference internal" href="#tcorrmap">TCorrMap</a><ul>
<li><a class="reference internal" href="#id31">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tcorrelate">TCorrelate</a><ul>
<li><a class="reference internal" href="#id32">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tnorm">TNorm</a><ul>
<li><a class="reference internal" href="#id33">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tproject">TProject</a><ul>
<li><a class="reference internal" href="#id34">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tshift">TShift</a><ul>
<li><a class="reference internal" href="#id35">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#volreg">Volreg</a><ul>
<li><a class="reference internal" href="#id36">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#warp">Warp</a><ul>
<li><a class="reference internal" href="#id37">Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<style type="text/css">
    div.sphinxsidebar .tile {
        border: 1px solid #D1DDE2;
        border-radius: 10px;
        background-color: #E1E8EC;
        padding-left: 0.5em;
        margin: 1em 0;
    }
</style>
<div class="sidebarblock">
    <h3>Versions</h3>

    <div class="tile">
        <table style="width: 100%;">
            <tr style="font-weight: bold;">
                <td align="left">Release</td><td align="right">Devel</td>
            </tr>
            <tr>
                <td align="left">1.1.3</td><td align="right">1.1.4-dev+g93c475b</td>
            </tr>
            <tr>
                <td align="left"><a href="../../../users/install.html">Download</a></td>
                <td align="right"><a href="https://github.com/nipy/nipype">Github</a></td>
            </tr>
        </table>
    </div>
</div>


<script type="text/javascript">
    (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
</script>

<h3>Links</h3>

<ul>
    <li>Docs: <a href="http://nipy.org/nipype">Stable</a> · <a href="http://nipype.readthedocs.org/en/latest/">Dev</a></li>
    <li>Code: <a href="http://github.com/nipy/nipype">Github</a> · <a href="http://github.com/nipy/nipype/issues">Bugs-Requests</a></li>
    <li>Forum: <a href="https://neurostars.org/search?q=nipype">User</a> · <a href="https://mail.python.org/mailman/listinfo/neuroimaging">Developer</a></li>
    <li>Chat: <a href="https://gitter.im/nipy/nipype">Gitter</a> · <a href="https://brainhack.slack.com/messages/C1FR76RAL">Slack</a></li>
    <li><a href="about.html#funding">Funding</a> · <a href="http://nipy.org/software/license/index.html"><img src="https://img.shields.io/pypi/l/nipype.svg" alt="License"></a></li>
    <li><a href="https://travis-ci.org/nipy/nipype"><img src="https://travis-ci.org/nipy/nipype.png?branch=master" alt="travis"></a> · <a href='https://codecov.io/gh/nipy/nipype'><img src='https://codecov.io/gh/nipy/nipype/branch/master/graph/badge.svg' alt='Coverage Status' /></a></li>
    <a href='https://pypi.python.org/pypi/nipype/'><img src='https://img.shields.io/pypi/pyversions/nipype.svg' alt='Python Versions' /></a></li>
</ul>

 
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="interfaces-afni-preprocess">
<h1>interfaces.afni.preprocess<a class="headerlink" href="#interfaces-afni-preprocess" title="Permalink to this headline">¶</a></h1>
<span class="target" id="nipype-interfaces-afni-preprocess-alignepianatpy"></span><div class="section" id="alignepianatpy">
<span id="index-0"></span><h2>AlignEpiAnatPy<a class="headerlink" href="#alignepianatpy" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L118">Link to code</a></p>
<p>Wraps command <strong>align_epi_anat.py</strong></p>
<p>Align EPI to anatomical datasets or vice versa
This Python script computes the alignment between two datasets, typically
an EPI and an anatomical structural dataset, and applies the resulting
transformation to one or the other to bring them into alignment.</p>
<p>This script computes the transforms needed to align EPI and
anatomical datasets using a cost function designed for this purpose. The
script combines multiple transformations, thereby minimizing the amount of
interpolation applied to the data.</p>
<dl class="docutils">
<dt>Basic Usage:</dt>
<dd>align_epi_anat.py -anat anat+orig -epi epi+orig -epi_base 5</dd>
</dl>
<p>The user must provide EPI and anatomical datasets and specify the EPI
sub-brick to use as a base in the alignment.</p>
<p>Internally, the script always aligns the anatomical to the EPI dataset,
and the resulting transformation is saved to a 1D file.
As a user option, the inverse of this transformation may be applied to the
EPI dataset in order to align it to the anatomical data instead.</p>
<p>This program generates several kinds of output in the form of datasets
and transformation matrices which can be applied to other datasets if
needed. Time-series volume registration, oblique data transformations and
Talairach (standard template) transformations will be combined as needed
and requested (with options to turn on and off each of the steps) in
order to create the aligned datasets.</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/align_epi_anat.py.html">align_epi_anat.py’ Documentation.</a></p>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">al_ea</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">AlignEpiAnatPy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">al_ea</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">anat</span> <span class="o">=</span> <span class="s2">&quot;structural.nii&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">al_ea</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s2">&quot;functional.nii&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">al_ea</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">epi_base</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">al_ea</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">epi_strip</span> <span class="o">=</span> <span class="s1">&#39;3dAutomask&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">al_ea</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">volreg</span> <span class="o">=</span> <span class="s1">&#39;off&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">al_ea</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">tshift</span> <span class="o">=</span> <span class="s1">&#39;off&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">al_ea</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">save_skullstrip</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">al_ea</span><span class="o">.</span><span class="n">cmdline</span> <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&#39;python2 ...align_epi_anat.py -anat structural.nii -epi_base 0 -epi_strip 3dAutomask -epi functional.nii -save_skullstrip -suffix _al -tshift off -volreg off&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">allineate</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
anat: (an existing file name)
        name of structural dataset
        flag: -anat %s
epi_base: (a long integer &gt;= 0 or &#39;mean&#39; or &#39;median&#39; or &#39;max&#39;)
        the epi base used in alignmentshould be one of
        (0/mean/median/max/subbrick#)
        flag: -epi_base %s
in_file: (an existing file name)
        EPI dataset to align
        flag: -epi %s

[Optional]
anat2epi: (a boolean)
        align anatomical to EPI dataset (default)
        flag: -anat2epi
args: (a unicode string)
        Additional parameters to the command
        flag: %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
epi2anat: (a boolean)
        align EPI to anatomical dataset
        flag: -epi2anat
epi_strip: (&#39;3dSkullStrip&#39; or &#39;3dAutomask&#39; or &#39;None&#39;)
        method to mask brain in EPI datashould be one
        of[3dSkullStrip]/3dAutomask/None)
        flag: -epi_strip %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
py27_path: (an existing file name or &#39;python2&#39;, nipype default value:
         python2)
save_skullstrip: (a boolean)
        save skull-stripped (not aligned)
        flag: -save_skullstrip
suffix: (a unicode string, nipype default value: _al)
        append suffix to the original anat/epi dataset to usein the
        resulting dataset names (default is &quot;_al&quot;)
        flag: -suffix %s
tshift: (&#39;on&#39; or &#39;off&#39;, nipype default value: on)
        do time shifting of EPI dataset before alignmentshould be &#39;on&#39; or
        &#39;off&#39;, defaults to &#39;on&#39;
        flag: -tshift %s
volreg: (&#39;on&#39; or &#39;off&#39;, nipype default value: on)
        do volume registration on EPI dataset before alignmentshould be &#39;on&#39;
        or &#39;off&#39;, defaults to &#39;on&#39;
        flag: -volreg %s
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">anat_al_mat</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">matrix</span> <span class="n">to</span> <span class="n">align</span> <span class="n">anatomy</span> <span class="n">to</span> <span class="n">the</span> <span class="n">EPI</span>
<span class="n">anat_al_orig</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">A</span> <span class="n">version</span> <span class="n">of</span> <span class="n">the</span> <span class="n">anatomy</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">aligned</span> <span class="n">to</span> <span class="n">the</span> <span class="n">EPI</span>
<span class="n">epi_al_mat</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">matrix</span> <span class="n">to</span> <span class="n">align</span> <span class="n">EPI</span> <span class="n">to</span> <span class="n">anatomy</span>
<span class="n">epi_al_orig</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">A</span> <span class="n">version</span> <span class="n">of</span> <span class="n">the</span> <span class="n">EPI</span> <span class="n">dataset</span> <span class="n">aligned</span> <span class="n">to</span> <span class="n">the</span> <span class="n">anatomy</span>
<span class="n">epi_al_tlrc_mat</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">matrix</span> <span class="n">to</span> <span class="n">volume</span> <span class="n">register</span> <span class="ow">and</span> <span class="n">align</span> <span class="n">epito</span> <span class="n">anatomy</span> <span class="ow">and</span> <span class="n">put</span> <span class="n">into</span>
        <span class="n">standard</span> <span class="n">space</span>
<span class="n">epi_reg_al_mat</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">matrix</span> <span class="n">to</span> <span class="n">volume</span> <span class="n">register</span> <span class="ow">and</span> <span class="n">align</span> <span class="n">epi</span> <span class="n">to</span> <span class="n">anatomy</span>
<span class="n">epi_tlrc_al</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">A</span> <span class="n">version</span> <span class="n">of</span> <span class="n">the</span> <span class="n">EPI</span> <span class="n">dataset</span> <span class="n">aligned</span> <span class="n">to</span> <span class="n">a</span> <span class="n">standard</span> <span class="n">template</span>
<span class="n">epi_vr_al_mat</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">matrix</span> <span class="n">to</span> <span class="n">volume</span> <span class="n">register</span> <span class="n">EPI</span>
<span class="n">epi_vr_motion</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">motion</span> <span class="n">parameters</span> <span class="kn">from</span> <span class="nn">EPI</span> <span class="n">time</span><span class="o">-</span><span class="n">seriesregistration</span> <span class="p">(</span><span class="n">tsh</span> <span class="n">included</span> <span class="ow">in</span>
        <span class="n">name</span> <span class="k">if</span> <span class="n">slicetiming</span> <span class="n">correction</span> <span class="ow">is</span> <span class="n">also</span> <span class="n">included</span><span class="p">)</span><span class="o">.</span>
<span class="n">skullstrip</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">skull</span><span class="o">-</span><span class="n">stripped</span> <span class="p">(</span><span class="ow">not</span> <span class="n">aligned</span><span class="p">)</span> <span class="n">volume</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-allineate"></span></div>
</div>
<div class="section" id="allineate">
<span id="index-1"></span><h2>Allineate<a class="headerlink" href="#allineate" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L456">Link to code</a></p>
<p>Wraps command <strong>3dAllineate</strong></p>
<p>Program to align one dataset (the ‘source’) to a base dataset</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dAllineate.html">3dAllineate Documentation.</a></p>
<div class="section" id="id1">
<h3>Examples<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allineate</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Allineate</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allineate</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allineate</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">out_file</span> <span class="o">=</span> <span class="s1">&#39;functional_allineate.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allineate</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_matrix</span> <span class="o">=</span> <span class="s1">&#39;cmatrix.mat&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allineate</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dAllineate -source functional.nii -prefix functional_allineate.nii -1Dmatrix_apply cmatrix.mat&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">allineate</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">allineate</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Allineate</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allineate</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allineate</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">reference</span> <span class="o">=</span> <span class="s1">&#39;structural.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allineate</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">allcostx</span> <span class="o">=</span> <span class="s1">&#39;out.allcostX.txt&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allineate</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dAllineate -source functional.nii -base structural.nii -allcostx |&amp; tee out.allcostX.txt&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">allineate</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">allineate</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Allineate</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allineate</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allineate</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">reference</span> <span class="o">=</span> <span class="s1">&#39;structural.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allineate</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">nwarp_fixmot</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allineate</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dAllineate -source functional.nii -nwarp_fixmotX -nwarp_fixmotY -prefix functional_allineate -base structural.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">allineate</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input file to 3dAllineate
        flag: -source %s

[Optional]
allcostx: (a file name)
        Compute and print ALL available cost functionals for the un-warped
        inputsAND THEN QUIT. If you use this option none of the other
        expected outputs will be produced
        flag: -allcostx |&amp; tee %s, position: -1
        mutually_exclusive: out_file, out_matrix, out_param_file,
         out_weight_file
args: (a unicode string)
        Additional parameters to the command
        flag: %s
autobox: (a boolean)
        Expand the -automask function to enclose a rectangular box that
        holds the irregular mask.
        flag: -autobox
automask: (an integer (int or long))
        Compute a mask function, set a value for dilation or 0.
        flag: -automask+%d
autoweight: (a unicode string)
        Compute a weight function using the 3dAutomask algorithm plus some
        blurring of the base image.
        flag: -autoweight%s
center_of_mass: (a unicode string)
        Use the center-of-mass calculation to bracket the shifts.
        flag: -cmass%s
check: (a list of items which are &#39;leastsq&#39; or &#39;ls&#39; or &#39;mutualinfo&#39;
         or &#39;mi&#39; or &#39;corratio_mul&#39; or &#39;crM&#39; or &#39;norm_mutualinfo&#39; or &#39;nmi&#39; or
         &#39;hellinger&#39; or &#39;hel&#39; or &#39;corratio_add&#39; or &#39;crA&#39; or &#39;corratio_uns&#39;
         or &#39;crU&#39;)
        After cost functional optimization is done, start at the final
        parameters and RE-optimize using this new cost functions. If the
        results are too different, a warning message will be printed.
        However, the final parameters from the original optimization will be
        used to create the output dataset.
        flag: -check %s
convergence: (a float)
        Convergence test in millimeters (default 0.05mm).
        flag: -conv %f
cost: (&#39;leastsq&#39; or &#39;ls&#39; or &#39;mutualinfo&#39; or &#39;mi&#39; or &#39;corratio_mul&#39; or
         &#39;crM&#39; or &#39;norm_mutualinfo&#39; or &#39;nmi&#39; or &#39;hellinger&#39; or &#39;hel&#39; or
         &#39;corratio_add&#39; or &#39;crA&#39; or &#39;corratio_uns&#39; or &#39;crU&#39;)
        Defines the &#39;cost&#39; function that defines the matching between the
        source and the base
        flag: -cost %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
epi: (a boolean)
        Treat the source dataset as being composed of warped EPI slices, and
        the base as comprising anatomically &#39;true&#39; images. Only phase-
        encoding direction image shearing and scaling will be allowed with
        this option.
        flag: -EPI
final_interpolation: (&#39;nearestneighbour&#39; or &#39;linear&#39; or &#39;cubic&#39; or
         &#39;quintic&#39; or &#39;wsinc5&#39;)
        Defines interpolation method used to create the output dataset
        flag: -final %s
fine_blur: (a float)
        Set the blurring radius to use in the fine resolution pass to &#39;x&#39;
        mm. A small amount (1-2 mm?) of blurring at the fine step may help
        with convergence, if there is some problem, especially if the base
        volume is very noisy. [Default == 0 mm = no blurring at the final
        alignment pass]
        flag: -fineblur %f
in_matrix: (a file name)
        matrix to align input file
        flag: -1Dmatrix_apply %s, position: -3
        mutually_exclusive: out_matrix
in_param_file: (an existing file name)
        Read warp parameters from file and apply them to the source dataset,
        and produce a new dataset
        flag: -1Dparam_apply %s
        mutually_exclusive: out_param_file
interpolation: (&#39;nearestneighbour&#39; or &#39;linear&#39; or &#39;cubic&#39; or
         &#39;quintic&#39;)
        Defines interpolation method to use during matching
        flag: -interp %s
master: (an existing file name)
        Write the output dataset on the same grid as this file.
        flag: -master %s
maxrot: (a float)
        Maximum allowed rotation in degrees.
        flag: -maxrot %f
maxscl: (a float)
        Maximum allowed scaling factor.
        flag: -maxscl %f
maxshf: (a float)
        Maximum allowed shift in mm.
        flag: -maxshf %f
maxshr: (a float)
        Maximum allowed shearing factor.
        flag: -maxshr %f
newgrid: (a float)
        Write the output dataset using isotropic grid spacing in mm.
        flag: -newgrid %f
nmatch: (an integer (int or long))
        Use at most n scattered points to match the datasets.
        flag: -nmatch %d
no_pad: (a boolean)
        Do not use zero-padding on the base image.
        flag: -nopad
nomask: (a boolean)
        Don&#39;t compute the autoweight/mask; if -weight is not also used, then
        every voxel will be counted equally.
        flag: -nomask
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
nwarp: (&#39;bilinear&#39; or &#39;cubic&#39; or &#39;quintic&#39; or &#39;heptic&#39; or &#39;nonic&#39; or
         &#39;poly3&#39; or &#39;poly5&#39; or &#39;poly7&#39; or &#39;poly9&#39;)
        Experimental nonlinear warping: bilinear or legendre poly.
        flag: -nwarp %s
nwarp_fixdep: (a list of items which are &#39;X&#39; or &#39;Y&#39; or &#39;Z&#39; or &#39;I&#39; or
         &#39;J&#39; or &#39;K&#39;)
        To fix non-linear warp dependency along directions.
        flag: -nwarp_fixdep%s...
nwarp_fixmot: (a list of items which are &#39;X&#39; or &#39;Y&#39; or &#39;Z&#39; or &#39;I&#39; or
         &#39;J&#39; or &#39;K&#39;)
        To fix motion along directions.
        flag: -nwarp_fixmot%s...
one_pass: (a boolean)
        Use only the refining pass -- do not try a coarse resolution pass
        first. Useful if you know that only small amounts of image alignment
        are needed.
        flag: -onepass
out_file: (a file name)
        output file from 3dAllineate
        flag: -prefix %s
        mutually_exclusive: allcostx
out_matrix: (a file name)
        Save the transformation matrix for each volume.
        flag: -1Dmatrix_save %s
        mutually_exclusive: in_matrix, allcostx
out_param_file: (a file name)
        Save the warp parameters in ASCII (.1D) format.
        flag: -1Dparam_save %s
        mutually_exclusive: in_param_file, allcostx
out_weight_file: (a file name)
        Write the weight volume to disk as a dataset
        flag: -wtprefix %s
        mutually_exclusive: allcostx
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
overwrite: (a boolean)
        overwrite output file if it already exists
        flag: -overwrite
quiet: (a boolean)
        Don&#39;t print out verbose progress reports.
        flag: -quiet
reference: (an existing file name)
        file to be used as reference, the first volume will be used if not
        given the reference will be the first volume of in_file.
        flag: -base %s
replacebase: (a boolean)
        If the source has more than one volume, then after the first volume
        is aligned to the base.
        flag: -replacebase
replacemeth: (&#39;leastsq&#39; or &#39;ls&#39; or &#39;mutualinfo&#39; or &#39;mi&#39; or
         &#39;corratio_mul&#39; or &#39;crM&#39; or &#39;norm_mutualinfo&#39; or &#39;nmi&#39; or
         &#39;hellinger&#39; or &#39;hel&#39; or &#39;corratio_add&#39; or &#39;crA&#39; or &#39;corratio_uns&#39;
         or &#39;crU&#39;)
        After first volume is aligned, switch method for later volumes. For
        use with &#39;-replacebase&#39;.
        flag: -replacemeth %s
source_automask: (an integer (int or long))
        Automatically mask the source dataset with dilation or 0.
        flag: -source_automask+%d
source_mask: (an existing file name)
        mask the input dataset
        flag: -source_mask %s
two_best: (an integer (int or long))
        In the coarse pass, use the best &#39;bb&#39; set of initialpoints to search
        for the starting point for the finepass. If bb==0, then no search is
        made for the beststarting point, and the identity transformation
        isused as the starting point. [Default=5; min=0 max=11]
        flag: -twobest %d
two_blur: (a float)
        Set the blurring radius for the first pass in mm.
        flag: -twoblur %f
two_first: (a boolean)
        Use -twopass on the first image to be registered, and then on all
        subsequent images from the source dataset, use results from the
        first image&#39;s coarse pass to start the fine pass.
        flag: -twofirst
two_pass: (a boolean)
        Use a two pass alignment strategy for all volumes, searching for a
        large rotation+shift and then refining the alignment.
        flag: -twopass
usetemp: (a boolean)
        temporary file use
        flag: -usetemp
verbose: (a boolean)
        Print out verbose progress reports.
        flag: -verb
warp_type: (&#39;shift_only&#39; or &#39;shift_rotate&#39; or &#39;shift_rotate_scale&#39; or
         &#39;affine_general&#39;)
        Set the warp type.
        flag: -warp %s
warpfreeze: (a boolean)
        Freeze the non-rigid body parameters after first volume.
        flag: -warpfreeze
weight: (an existing file name or a float)
        Set the weighting for each voxel in the base dataset; larger weights
        mean that voxel count more in the cost function. If an image file is
        given, the volume must be defined on the same grid as the base
        dataset
        flag: -weight %s
weight_file: (an existing file name)
        Set the weighting for each voxel in the base dataset; larger weights
        mean that voxel count more in the cost function. Must be defined on
        the same grid as the base dataset
        flag: -weight %s
zclip: (a boolean)
        Replace negative values in the input datasets (source &amp; base) with
        zero.
        flag: -zclip
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">allcostx</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">Compute</span> <span class="ow">and</span> <span class="nb">print</span> <span class="n">ALL</span> <span class="n">available</span> <span class="n">cost</span> <span class="n">functionals</span> <span class="k">for</span> <span class="n">the</span> <span class="n">un</span><span class="o">-</span><span class="n">warped</span>
        <span class="n">inputs</span>
<span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">image</span> <span class="n">file</span> <span class="n">name</span>
<span class="n">out_matrix</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">matrix</span> <span class="n">to</span> <span class="n">align</span> <span class="nb">input</span> <span class="n">file</span>
<span class="n">out_param_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">warp</span> <span class="n">parameters</span>
<span class="n">out_weight_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">weight</span> <span class="n">volume</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-autotlrc"></span></div>
</div>
<div class="section" id="autotlrc">
<span id="index-2"></span><h2>AutoTLRC<a class="headerlink" href="#autotlrc" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L715">Link to code</a></p>
<p>Wraps command <strong>&#64;auto_tlrc</strong></p>
<p>A minmal wrapper for the AutoTLRC script
The only option currently supported is no_ss.
For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/&#64;auto_tlrc.html">3dQwarp Documentation.</a></p>
<div class="section" id="id2">
<h3>Examples<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">autoTLRC</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">AutoTLRC</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">autoTLRC</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;structural.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">autoTLRC</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">no_ss</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">autoTLRC</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">base</span> <span class="o">=</span> <span class="s2">&quot;TT_N27+tlrc&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">autoTLRC</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;@auto_tlrc -base TT_N27+tlrc -input structural.nii -no_ss&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">autoTLRC</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
base: (a unicode string)
         Reference anatomical volume Usually this volume is in some standard
        space like TLRC or MNI space and with afni dataset view of (+tlrc).
        Preferably, this reference volume should have had the skull removed
        but that is not mandatory. AFNI&#39;s distribution contains several
        templates. For a longer list, use &quot;whereami
        -show_templates&quot;TT_N27+tlrc --&gt; Single subject, skull stripped
        volume. This volume is also known as N27_SurfVol_NoSkull+tlrc
        elsewhere in AFNI and SUMA land. (www.loni.ucla.edu,
        www.bic.mni.mcgill.ca) This template has a full set of FreeSurfer
        (surfer.nmr.mgh.harvard.edu) surface models that can be used in
        SUMA. For details, see Talairach-related link:
        https://afni.nimh.nih.gov/afni/sumaTT_icbm452+tlrc --&gt; Average
        volume of 452 normal brains. Skull Stripped.
        (www.loni.ucla.edu)TT_avg152T1+tlrc --&gt; Average volume of 152 normal
        brains. Skull Stripped.(www.bic.mni.mcgill.ca)TT_EPI+tlrc --&gt; EPI
        template from spm2, masked as TT_avg152T1 TT_avg152 and TT_EPI
        volume sources are from SPM&#39;s distribution.
        (www.fil.ion.ucl.ac.uk/spm/)If you do not specify a path for the
        template, the scriptwill attempt to locate the template AFNI&#39;s
        binaries directory.NOTE: These datasets have been slightly modified
        from their original size to match the standard TLRC dimensions (Jean
        Talairach and Pierre Tournoux Co-Planar Stereotaxic Atlas of the
        Human Brain Thieme Medical Publishers, New York, 1988). That was
        done for internal consistency in AFNI. You may use the original form
        of these volumes if you choose but your TLRC coordinates will not be
        consistent with AFNI&#39;s TLRC database (San Antonio Talairach Daemon
        database), for example.
        flag: -base %s
in_file: (an existing file name)
        Original anatomical volume (+orig).The skull is removed by this
        scriptunless instructed otherwise (-no_ss).
        flag: -input %s

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
no_ss: (a boolean)
        Do not strip skull of input data set(because skull has already been
        removedor because template still has the skull)NOTE: The -no_ss
        option is not all that optional. Here is a table of when you should
        and should not use -no_ss Template Template WITH skull WITHOUT skull
        Dset. WITH skull -no_ss xxx WITHOUT skull No Cigar -no_ss Template
        means: Your template of choice Dset. means: Your anatomical dataset
        -no_ss means: Skull stripping should not be attempted on Dset xxx
        means: Don&#39;t put anything, the script will strip Dset No Cigar
        means: Don&#39;t try that combination, it makes no sense.
        flag: -no_ss
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-autotcorrelate"></span></div>
</div>
<div class="section" id="autotcorrelate">
<span id="index-3"></span><h2>AutoTcorrelate<a class="headerlink" href="#autotcorrelate" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L553">Link to code</a></p>
<p>Wraps command <strong>3dAutoTcorrelate</strong></p>
<p>Computes the correlation coefficient between the time series of each
pair of voxels in the input dataset, and stores the output into a
new anatomical bucket dataset [scaled to shorts to save memory space].</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dAutoTcorrelate.html">3dAutoTcorrelate Documentation.</a></p>
<div class="section" id="id3">
<h3>Examples<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corr</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">AutoTcorrelate</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corr</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corr</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">polort</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corr</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">eta2</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corr</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">mask</span> <span class="o">=</span> <span class="s1">&#39;mask.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corr</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">mask_only_targets</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corr</span><span class="o">.</span><span class="n">cmdline</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&#39;3dAutoTcorrelate -eta2 -mask mask.nii -mask_only_targets -prefix functional_similarity_matrix.1D -polort -1 functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">corr</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        timeseries x space (volume or surface) file
        flag: %s, position: -1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
eta2: (a boolean)
        eta^2 similarity
        flag: -eta2
mask: (an existing file name)
        mask of voxels
        flag: -mask %s
mask_only_targets: (a boolean)
        use mask only on targets voxels
        flag: -mask_only_targets
        mutually_exclusive: mask_source
mask_source: (an existing file name)
        mask for source voxels
        flag: -mask_source %s
        mutually_exclusive: mask_only_targets
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out_file: (a file name)
        output image file name
        flag: -prefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
polort: (an integer (int or long))
        Remove polynomical trend of order m or -1 for no detrending
        flag: -polort %d
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-automask"></span></div>
</div>
<div class="section" id="automask">
<span id="index-4"></span><h2>Automask<a class="headerlink" href="#automask" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L618">Link to code</a></p>
<p>Wraps command <strong>3dAutomask</strong></p>
<p>Create a brain-only mask of the image using AFNI 3dAutomask command</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dAutomask.html">3dAutomask Documentation.</a></p>
<div class="section" id="id4">
<h3>Examples<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">automask</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Automask</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">automask</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">automask</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">dilate</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">automask</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">outputtype</span> <span class="o">=</span> <span class="s1">&#39;NIFTI&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">automask</span><span class="o">.</span><span class="n">cmdline</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&#39;3dAutomask -apply_prefix functional_masked.nii -dilate 1 -prefix functional_mask.nii functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">automask</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input file to 3dAutomask
        flag: %s, position: -1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
brain_file: (a file name)
        output file from 3dAutomask
        flag: -apply_prefix %s
clfrac: (a float)
        sets the clip level fraction (must be 0.1-0.9). A small value will
        tend to make the mask larger [default = 0.5].
        flag: -clfrac %s
dilate: (an integer (int or long))
        dilate the mask outwards
        flag: -dilate %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
erode: (an integer (int or long))
        erode the mask inwards
        flag: -erode %s
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out_file: (a file name)
        output image file name
        flag: -prefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">brain_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">brain</span> <span class="n">file</span> <span class="p">(</span><span class="n">skull</span> <span class="n">stripped</span><span class="p">)</span>
<span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">mask</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-bandpass"></span></div>
</div>
<div class="section" id="bandpass">
<span id="index-5"></span><h2>Bandpass<a class="headerlink" href="#bandpass" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L815">Link to code</a></p>
<p>Wraps command <strong>3dBandpass</strong></p>
<p>Program to lowpass and/or highpass each voxel time series in a
dataset, offering more/different options than Fourier</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dBandpass.html">3dBandpass Documentation.</a></p>
<div class="section" id="id5">
<h3>Examples<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.testing</span> <span class="k">import</span>  <span class="n">example_data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bandpass</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Bandpass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bandpass</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bandpass</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">highpass</span> <span class="o">=</span> <span class="mf">0.005</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bandpass</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">lowpass</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bandpass</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dBandpass -prefix functional_bp 0.005000 0.100000 functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">bandpass</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
highpass: (a float)
        highpass
        flag: %f, position: -3
in_file: (an existing file name)
        input file to 3dBandpass
        flag: %s, position: -1
lowpass: (a float)
        lowpass
        flag: %f, position: -2

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
automask: (a boolean)
        Create a mask from the input dataset.
        flag: -automask
blur: (a float)
        Blur (inside the mask only) with a filter width (FWHM) of &#39;fff&#39;
        millimeters.
        flag: -blur %f
despike: (a boolean)
        Despike each time series before other processing. Hopefully, you
        don&#39;t actually need to do this, which is why it is optional.
        flag: -despike
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
localPV: (a float)
        Replace each vector by the local Principal Vector (AKA first
        singular vector) from a neighborhood of radius &#39;rrr&#39; millimeters.
        Note that the PV time series is L2 normalized. This option is mostly
        for Bob Cox to have fun with.
        flag: -localPV %f
mask: (an existing file name)
        mask file
        flag: -mask %s, position: 2
nfft: (an integer (int or long))
        Set the FFT length [must be a legal value].
        flag: -nfft %d
no_detrend: (a boolean)
        Skip the quadratic detrending of the input that occurs before the
        FFT-based bandpassing. You would only want to do this if the dataset
        had been detrended already in some other program.
        flag: -nodetrend
normalize: (a boolean)
        Make all output time series have L2 norm = 1 (i.e., sum of squares =
        1).
        flag: -norm
notrans: (a boolean)
        Don&#39;t check for initial positive transients in the data. The test is
        a little slow, so skipping it is OK, if you KNOW the data time
        series are transient-free.
        flag: -notrans
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
orthogonalize_dset: (an existing file name)
        Orthogonalize each voxel to the corresponding voxel time series in
        dataset &#39;fset&#39;, which must have the same spatial and temporal grid
        structure as the main input dataset. At present, only one &#39;-dsort&#39;
        option is allowed.
        flag: -dsort %s
orthogonalize_file: (a list of items which are an existing file name)
        Also orthogonalize input to columns in f.1D. Multiple &#39;-ort&#39; options
        are allowed.
        flag: -ort %s
out_file: (a file name)
        output file from 3dBandpass
        flag: -prefix %s, position: 1
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
tr: (a float)
        Set time step (TR) in sec [default=from dataset header].
        flag: -dt %f
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-blurinmask"></span></div>
</div>
<div class="section" id="blurinmask">
<span id="index-6"></span><h2>BlurInMask<a class="headerlink" href="#blurinmask" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L879">Link to code</a></p>
<p>Wraps command <strong>3dBlurInMask</strong></p>
<p>Blurs a dataset spatially inside a mask.  That’s all.  Experimental.</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dBlurInMask.html">3dBlurInMask Documentation.</a></p>
<div class="section" id="id6">
<h3>Examples<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bim</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">BlurInMask</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bim</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bim</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">mask</span> <span class="o">=</span> <span class="s1">&#39;mask.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bim</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">fwhm</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bim</span><span class="o">.</span><span class="n">cmdline</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&#39;3dBlurInMask -input functional.nii -FWHM 5.000000 -mask mask.nii -prefix functional_blur&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">bim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
fwhm: (a float)
        fwhm kernel size
        flag: -FWHM %f
in_file: (an existing file name)
        input file to 3dSkullStrip
        flag: -input %s, position: 1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
automask: (a boolean)
        Create an automask from the input dataset.
        flag: -automask
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
float_out: (a boolean)
        Save dataset as floats, no matter what the input data type is.
        flag: -float
mask: (a file name)
        Mask dataset, if desired. Blurring will occur only within the mask.
        Voxels NOT in the mask will be set to zero in the output.
        flag: -mask %s
multimask: (a file name)
        Multi-mask dataset -- each distinct nonzero value in dataset will be
        treated as a separate mask for blurring purposes.
        flag: -Mmask %s
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
options: (a unicode string)
        options
        flag: %s, position: 2
out_file: (a file name)
        output to the file
        flag: -prefix %s, position: -1
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
preserve: (a boolean)
        Normally, voxels not in the mask will be set to zero in the output.
        If you want the original values in the dataset to be preserved in
        the output, use this option.
        flag: -preserve
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-blurtofwhm"></span></div>
</div>
<div class="section" id="blurtofwhm">
<span id="index-7"></span><h2>BlurToFWHM<a class="headerlink" href="#blurtofwhm" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L929">Link to code</a></p>
<p>Wraps command <strong>3dBlurToFWHM</strong></p>
<p>Blurs a ‘master’ dataset until it reaches a specified FWHM smoothness
(approximately).</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dBlurToFWHM.html">3dBlurToFWHM Documentation</a></p>
<div class="section" id="id7">
<h3>Examples<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blur</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">preprocess</span><span class="o">.</span><span class="n">BlurToFWHM</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blur</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;epi.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blur</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">fwhm</span> <span class="o">=</span> <span class="mf">2.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blur</span><span class="o">.</span><span class="n">cmdline</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&#39;3dBlurToFWHM -FWHM 2.500000 -input epi.nii -prefix epi_afni&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">blur</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        The dataset that will be smoothed
        flag: -input %s

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
automask: (a boolean)
        Create an automask from the input dataset.
        flag: -automask
blurmaster: (an existing file name)
        The dataset whose smoothness controls the process.
        flag: -blurmaster %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
fwhm: (a float)
        Blur until the 3D FWHM reaches this value (in mm)
        flag: -FWHM %f
fwhmxy: (a float)
        Blur until the 2D (x,y)-plane FWHM reaches this value (in mm)
        flag: -FWHMxy %f
mask: (an existing file name)
        Mask dataset, if desired. Voxels NOT in mask will be set to zero in
        output.
        flag: -mask %s
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out_file: (a file name)
        output image file name
        flag: -prefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-cliplevel"></span></div>
</div>
<div class="section" id="cliplevel">
<span id="index-8"></span><h2>ClipLevel<a class="headerlink" href="#cliplevel" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L981">Link to code</a></p>
<p>Wraps command <strong>3dClipLevel</strong></p>
<dl class="docutils">
<dt>Estimates the value at which to clip the anatomical dataset so</dt>
<dd>that background regions are set to zero.</dd>
</dl>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dClipLevel.html">3dClipLevel Documentation.</a></p>
<div class="section" id="id8">
<h3>Examples<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces.afni</span> <span class="k">import</span> <span class="n">preprocess</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cliplevel</span> <span class="o">=</span> <span class="n">preprocess</span><span class="o">.</span><span class="n">ClipLevel</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cliplevel</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;anatomical.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cliplevel</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dClipLevel anatomical.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">cliplevel</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input file to 3dClipLevel
        flag: %s, position: -1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
doall: (a boolean)
        Apply the algorithm to each sub-brick separately.
        flag: -doall, position: 3
        mutually_exclusive: g, r, a, d
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
grad: (a file name)
        Also compute a &#39;gradual&#39; clip level as a function of voxel position,
        and output that to a dataset.
        flag: -grad %s, position: 3
        mutually_exclusive: d, o, a, l, l
mfrac: (a float)
        Use the number ff instead of 0.50 in the algorithm
        flag: -mfrac %s, position: 2
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">clip_val</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="nb">float</span><span class="p">)</span>
        <span class="n">output</span>
</pre></div>
</div>
<span class="target" id="nipype-interfaces-afni-preprocess-degreecentrality"></span></div>
</div>
<div class="section" id="degreecentrality">
<span id="index-9"></span><h2>DegreeCentrality<a class="headerlink" href="#degreecentrality" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L1060">Link to code</a></p>
<p>Wraps command <strong>3dDegreeCentrality</strong></p>
<p>Performs degree centrality on a dataset using a given maskfile
via 3dDegreeCentrality</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dDegreeCentrality.html">3dDegreeCentrality Documentation.</a></p>
<div class="section" id="id9">
<h3>Examples<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">degree</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">DegreeCentrality</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">degree</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">degree</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">mask</span> <span class="o">=</span> <span class="s1">&#39;mask.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">degree</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">sparsity</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># keep the top one percent of connections</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">degree</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">out_file</span> <span class="o">=</span> <span class="s1">&#39;out.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">degree</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dDegreeCentrality -mask mask.nii -prefix out.nii -sparsity 1.000000 functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">degree</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input file to 3dDegreeCentrality
        flag: %s, position: -1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
autoclip: (a boolean)
        Clip off low-intensity regions in the dataset
        flag: -autoclip
automask: (a boolean)
        Mask the dataset to target brain-only voxels
        flag: -automask
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
mask: (an existing file name)
        mask file to mask input data
        flag: -mask %s
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
oned_file: (a unicode string)
        output filepath to text dump of correlation matrix
        flag: -out1D %s
out_file: (a file name)
        output image file name
        flag: -prefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
polort: (an integer (int or long))
        flag: -polort %d
sparsity: (a float)
        only take the top percent of connections
        flag: -sparsity %f
thresh: (a float)
        threshold to exclude connections where corr &lt;= thresh
        flag: -thresh %f
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">oned_file</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">The</span> <span class="n">text</span> <span class="n">output</span> <span class="n">of</span> <span class="n">the</span> <span class="n">similarity</span> <span class="n">matrix</span> <span class="n">computed</span> <span class="n">after</span> <span class="n">thresholding</span>
        <span class="k">with</span> <span class="n">one</span><span class="o">-</span><span class="n">dimensional</span> <span class="ow">and</span> <span class="n">ijk</span> <span class="n">voxel</span> <span class="n">indices</span><span class="p">,</span> <span class="n">correlations</span><span class="p">,</span> <span class="n">image</span>
        <span class="n">extents</span><span class="p">,</span> <span class="ow">and</span> <span class="n">affine</span> <span class="n">matrix</span><span class="o">.</span>
<span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-despike"></span></div>
</div>
<div class="section" id="despike">
<span id="index-10"></span><h2>Despike<a class="headerlink" href="#despike" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L1114">Link to code</a></p>
<p>Wraps command <strong>3dDespike</strong></p>
<p>Removes ‘spikes’ from the 3D+time input dataset</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dDespike.html">3dDespike Documentation.</a></p>
<div class="section" id="id10">
<h3>Examples<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">despike</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Despike</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">despike</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">despike</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dDespike -prefix functional_despike functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">despike</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input file to 3dDespike
        flag: %s, position: -1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out_file: (a file name)
        output image file name
        flag: -prefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-detrend"></span></div>
</div>
<div class="section" id="detrend">
<span id="index-11"></span><h2>Detrend<a class="headerlink" href="#detrend" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L1152">Link to code</a></p>
<p>Wraps command <strong>3dDetrend</strong></p>
<p>This program removes components from voxel time series using
linear least squares</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dDetrend.html">3dDetrend Documentation.</a></p>
<div class="section" id="id11">
<h3>Examples<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detrend</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Detrend</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detrend</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detrend</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="s1">&#39;-polort 2&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detrend</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">outputtype</span> <span class="o">=</span> <span class="s1">&#39;AFNI&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">detrend</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dDetrend -polort 2 -prefix functional_detrend functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">detrend</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input file to 3dDetrend
        flag: %s, position: -1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out_file: (a file name)
        output image file name
        flag: -prefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-ecm"></span></div>
</div>
<div class="section" id="ecm">
<span id="index-12"></span><h2>ECM<a class="headerlink" href="#ecm" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L1222">Link to code</a></p>
<p>Wraps command <strong>3dECM</strong></p>
<p>Performs degree centrality on a dataset using a given maskfile
via the 3dECM command</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dECM.html">3dECM Documentation.</a></p>
<div class="section" id="id12">
<h3>Examples<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ecm</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">ECM</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ecm</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ecm</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">mask</span> <span class="o">=</span> <span class="s1">&#39;mask.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ecm</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">sparsity</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="c1"># keep top 0.1% of connections</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ecm</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">out_file</span> <span class="o">=</span> <span class="s1">&#39;out.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ecm</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dECM -mask mask.nii -prefix out.nii -sparsity 0.100000 functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">ecm</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input file to 3dECM
        flag: %s, position: -1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
autoclip: (a boolean)
        Clip off low-intensity regions in the dataset
        flag: -autoclip
automask: (a boolean)
        Mask the dataset to target brain-only voxels
        flag: -automask
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
eps: (a float)
        sets the stopping criterion for the power iteration; l2|v_old -
        v_new| &lt; eps*|v_old|; default = 0.001
        flag: -eps %f
fecm: (a boolean)
        Fast centrality method; substantial speed increase but cannot
        accomodate thresholding; automatically selected if -thresh or
        -sparsity are not set
        flag: -fecm
full: (a boolean)
        Full power method; enables thresholding; automatically selected if
        -thresh or -sparsity are set
        flag: -full
mask: (an existing file name)
        mask file to mask input data
        flag: -mask %s
max_iter: (an integer (int or long))
        sets the maximum number of iterations to use in the power iteration;
        default = 1000
        flag: -max_iter %d
memory: (a float)
        Limit memory consumption on system by setting the amount of GB to
        limit the algorithm to; default = 2GB
        flag: -memory %f
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out_file: (a file name)
        output image file name
        flag: -prefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
polort: (an integer (int or long))
        flag: -polort %d
scale: (a float)
        scale correlation coefficients in similarity matrix to after
        shifting, x &gt;= 0.0; default = 1.0 for -full, 0.5 for -fecm
        flag: -scale %f
shift: (a float)
        shift correlation coefficients in similarity matrix to enforce non-
        negativity, s &gt;= 0.0; default = 0.0 for -full, 1.0 for -fecm
        flag: -shift %f
sparsity: (a float)
        only take the top percent of connections
        flag: -sparsity %f
thresh: (a float)
        threshold to exclude connections where corr &lt;= thresh
        flag: -thresh %f
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-fim"></span></div>
</div>
<div class="section" id="fim">
<span id="index-13"></span><h2>Fim<a class="headerlink" href="#fim" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L1278">Link to code</a></p>
<p>Wraps command <strong>3dfim+</strong></p>
<p>Program to calculate the cross-correlation of an ideal reference
waveform with the measured FMRI time series for each voxel.</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dfim+.html">3dfim+ Documentation.</a></p>
<div class="section" id="id13">
<h3>Examples<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fim</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Fim</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fim</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fim</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">ideal_file</span><span class="o">=</span> <span class="s1">&#39;seed.1D&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fim</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">out_file</span> <span class="o">=</span> <span class="s1">&#39;functional_corr.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fim</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;Correlation&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fim</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">fim_thr</span> <span class="o">=</span> <span class="mf">0.0009</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fim</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dfim+ -input functional.nii -ideal_file seed.1D -fim_thr 0.000900 -out Correlation -bucket functional_corr.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">fim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
ideal_file: (an existing file name)
        ideal time series file name
        flag: -ideal_file %s, position: 2
in_file: (an existing file name)
        input file to 3dfim+
        flag: -input %s, position: 1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
fim_thr: (a float)
        fim internal mask threshold value
        flag: -fim_thr %f, position: 3
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out: (a unicode string)
        Flag to output the specified parameter
        flag: -out %s, position: 4
out_file: (a file name)
        output image file name
        flag: -bucket %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-fourier"></span></div>
</div>
<div class="section" id="fourier">
<span id="index-14"></span><h2>Fourier<a class="headerlink" href="#fourier" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L1329">Link to code</a></p>
<p>Wraps command <strong>3dFourier</strong></p>
<p>Program to lowpass and/or highpass each voxel time series in a
dataset, via the FFT</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dFourier.html">3dFourier Documentation.</a></p>
<div class="section" id="id14">
<h3>Examples<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fourier</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Fourier</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fourier</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fourier</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">retrend</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fourier</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">highpass</span> <span class="o">=</span> <span class="mf">0.005</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fourier</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">lowpass</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fourier</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dFourier -highpass 0.005000 -lowpass 0.100000 -prefix functional_fourier -retrend functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">fourier</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
highpass: (a float)
        highpass
        flag: -highpass %f
in_file: (an existing file name)
        input file to 3dFourier
        flag: %s, position: -1
lowpass: (a float)
        lowpass
        flag: -lowpass %f

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out_file: (a file name)
        output image file name
        flag: -prefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
retrend: (a boolean)
        Any mean and linear trend are removed before filtering. This will
        restore the trend after filtering.
        flag: -retrend
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-hist"></span></div>
</div>
<div class="section" id="hist">
<span id="index-15"></span><h2>Hist<a class="headerlink" href="#hist" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L1395">Link to code</a></p>
<p>Wraps command <strong>3dHist</strong></p>
<p>Computes average of all voxels in the input dataset
which satisfy the criterion in the options list</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dHist.html">3dHist Documentation.</a></p>
<div class="section" id="id15">
<h3>Examples<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hist</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Hist</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hist</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hist</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dHist -input functional.nii -prefix functional_hist&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">hist</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input file to 3dHist
        flag: -input %s, position: 1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
bin_width: (a float)
        bin width
        flag: -binwidth %f
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
mask: (an existing file name)
        matrix to align input file
        flag: -mask %s
max_value: (a float)
        maximum intensity value
        flag: -max %f
min_value: (a float)
        minimum intensity value
        flag: -min %f
nbin: (an integer (int or long))
        number of bins
        flag: -nbin %d
out_file: (a file name)
        Write histogram to niml file with this prefix
        flag: -prefix %s
out_show: (a file name)
        output image file name
        flag: &gt; %s, position: -1
showhist: (a boolean, nipype default value: False)
        write a text visual histogram
        flag: -showhist
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
<span class="n">out_show</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">visual</span> <span class="n">histogram</span>
</pre></div>
</div>
<span class="target" id="nipype-interfaces-afni-preprocess-lfcd"></span></div>
</div>
<div class="section" id="lfcd">
<span id="index-16"></span><h2>LFCD<a class="headerlink" href="#lfcd" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L1456">Link to code</a></p>
<p>Wraps command <strong>3dLFCD</strong></p>
<p>Performs degree centrality on a dataset using a given maskfile
via the 3dLFCD command</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dLFCD.html">3dLFCD Documentation.</a></p>
<div class="section" id="id16">
<h3>Examples<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lfcd</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">LFCD</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lfcd</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lfcd</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">mask</span> <span class="o">=</span> <span class="s1">&#39;mask.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lfcd</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">thresh</span> <span class="o">=</span> <span class="mf">0.8</span> <span class="c1"># keep all connections with corr &gt;= 0.8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lfcd</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">out_file</span> <span class="o">=</span> <span class="s1">&#39;out.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lfcd</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dLFCD -mask mask.nii -prefix out.nii -thresh 0.800000 functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">lfcd</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input file to 3dLFCD
        flag: %s, position: -1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
autoclip: (a boolean)
        Clip off low-intensity regions in the dataset
        flag: -autoclip
automask: (a boolean)
        Mask the dataset to target brain-only voxels
        flag: -automask
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
mask: (an existing file name)
        mask file to mask input data
        flag: -mask %s
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out_file: (a file name)
        output image file name
        flag: -prefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
polort: (an integer (int or long))
        flag: -polort %d
thresh: (a float)
        threshold to exclude connections where corr &lt;= thresh
        flag: -thresh %f
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-maskave"></span></div>
</div>
<div class="section" id="maskave">
<span id="index-17"></span><h2>Maskave<a class="headerlink" href="#maskave" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L1506">Link to code</a></p>
<p>Wraps command <strong>3dmaskave</strong></p>
<p>Computes average of all voxels in the input dataset
which satisfy the criterion in the options list</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dmaskave.html">3dmaskave Documentation.</a></p>
<div class="section" id="id17">
<h3>Examples<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maskave</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Maskave</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maskave</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maskave</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">mask</span><span class="o">=</span> <span class="s1">&#39;seed_mask.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maskave</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">quiet</span><span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maskave</span><span class="o">.</span><span class="n">cmdline</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&#39;3dmaskave -mask seed_mask.nii -quiet functional.nii &gt; functional_maskave.1D&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">maskave</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input file to 3dmaskave
        flag: %s, position: -2

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
mask: (an existing file name)
        matrix to align input file
        flag: -mask %s, position: 1
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out_file: (a file name)
        output image file name
        flag: &gt; %s, position: -1
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
quiet: (a boolean)
        matrix to align input file
        flag: -quiet, position: 2
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-means"></span></div>
</div>
<div class="section" id="means">
<span id="index-18"></span><h2>Means<a class="headerlink" href="#means" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L1563">Link to code</a></p>
<p>Wraps command <strong>3dMean</strong></p>
<p>Takes the voxel-by-voxel mean of all input datasets using 3dMean</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dMean.html">3dMean Documentation.</a></p>
<div class="section" id="id18">
<h3>Examples<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">means</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Means</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">means</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file_a</span> <span class="o">=</span> <span class="s1">&#39;im1.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">means</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file_b</span> <span class="o">=</span> <span class="s1">&#39;im2.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">means</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">out_file</span> <span class="o">=</span>  <span class="s1">&#39;output.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">means</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dMean -prefix output.nii im1.nii im2.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">means</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">means</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Means</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">means</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file_a</span> <span class="o">=</span> <span class="s1">&#39;im1.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">means</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">out_file</span> <span class="o">=</span>  <span class="s1">&#39;output.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">means</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">datum</span> <span class="o">=</span> <span class="s1">&#39;short&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">means</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dMean -datum short -prefix output.nii im1.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">means</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file_a: (an existing file name)
        input file to 3dMean
        flag: %s, position: -2

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
count: (a boolean)
        compute count of non-zero voxels
        flag: -count
datum: (a unicode string)
        Sets the data type of the output dataset
        flag: -datum %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
in_file_b: (an existing file name)
        another input file to 3dMean
        flag: %s, position: -1
mask_inter: (a boolean)
        create intersection mask
        flag: -mask_inter
mask_union: (a boolean)
        create union mask
        flag: -mask_union
non_zero: (a boolean)
        use only non-zero values
        flag: -non_zero
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out_file: (a file name)
        output image file name
        flag: -prefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
scale: (a unicode string)
        scaling of output
        flag: -%sscale
sqr: (a boolean)
        mean square instead of value
        flag: -sqr
std_dev: (a boolean)
        calculate std dev
        flag: -stdev
summ: (a boolean)
        take sum, (not average)
        flag: -sum
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-outliercount"></span></div>
</div>
<div class="section" id="outliercount">
<span id="index-19"></span><h2>OutlierCount<a class="headerlink" href="#outliercount" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L1669">Link to code</a></p>
<p>Wraps command <strong>3dToutcount</strong></p>
<p>Calculates number of ‘outliers’ at each time point of a
a 3D+time dataset.</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dToutcount.html">3dToutcount Documentation</a></p>
<div class="section" id="id19">
<h3>Examples<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">toutcount</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">OutlierCount</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">toutcount</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">toutcount</span><span class="o">.</span><span class="n">cmdline</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&#39;3dToutcount -qthr 0.00100 functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">toutcount</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input dataset
        flag: %s, position: -2

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
autoclip: (a boolean, nipype default value: False)
        clip off small voxels
        flag: -autoclip
        mutually_exclusive: mask
automask: (a boolean, nipype default value: False)
        clip off small voxels
        flag: -automask
        mutually_exclusive: mask
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
fraction: (a boolean, nipype default value: False)
        write out the fraction of masked voxels which are outliers at each
        timepoint
        flag: -fraction
interval: (a boolean, nipype default value: False)
        write out the median + 3.5 MAD of outlier count with each timepoint
        flag: -range
legendre: (a boolean, nipype default value: False)
        use Legendre polynomials
        flag: -legendre
mask: (an existing file name)
        only count voxels within the given mask
        flag: -mask %s
        mutually_exclusive: autoclip, automask
out_file: (a file name)
        capture standard output
outliers_file: (a file name)
        output image file name
        flag: -save %s
polort: (an integer (int or long))
        detrend each voxel timeseries with polynomials
        flag: -polort %d
qthr: (0.0 &lt;= a floating point number &lt;= 1.0, nipype default value:
         0.001)
        indicate a value for q to compute alpha
        flag: -qthr %.5f
save_outliers: (a boolean, nipype default value: False)
        enables out_file option
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">capture</span> <span class="n">standard</span> <span class="n">output</span>
<span class="n">out_outliers</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">image</span> <span class="n">file</span> <span class="n">name</span>
</pre></div>
</div>
<span class="target" id="nipype-interfaces-afni-preprocess-qualityindex"></span></div>
</div>
<div class="section" id="qualityindex">
<span id="index-20"></span><h2>QualityIndex<a class="headerlink" href="#qualityindex" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L1779">Link to code</a></p>
<p>Wraps command <strong>3dTqual</strong></p>
<p>Computes a <a href="#id20"><span class="problematic" id="id21">`</span></a>quality index’ for each sub-brick in a 3D+time dataset.
The output is a 1D time series with the index for each sub-brick.
The results are written to stdout.</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dTqual.html">3dTqual Documentation</a></p>
<div class="section" id="id22">
<h3>Examples<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tqual</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">QualityIndex</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tqual</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tqual</span><span class="o">.</span><span class="n">cmdline</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&#39;3dTqual functional.nii &gt; functional_tqual&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">tqual</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input dataset
        flag: %s, position: -2

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
autoclip: (a boolean, nipype default value: False)
        clip off small voxels
        flag: -autoclip
        mutually_exclusive: mask
automask: (a boolean, nipype default value: False)
        clip off small voxels
        flag: -automask
        mutually_exclusive: mask
clip: (a float)
        clip off values below
        flag: -clip %f
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
interval: (a boolean, nipype default value: False)
        write out the median + 3.5 MAD of outlier count with each timepoint
        flag: -range
mask: (an existing file name)
        compute correlation only across masked voxels
        flag: -mask %s
        mutually_exclusive: autoclip, automask
out_file: (a file name)
        capture standard output
        flag: &gt; %s, position: -1
quadrant: (a boolean, nipype default value: False)
        Similar to -spearman, but using 1 minus the quadrant correlation
        coefficient as the quality index.
        flag: -quadrant
spearman: (a boolean, nipype default value: False)
        Quality index is 1 minus the Spearman (rank) correlation coefficient
        of each sub-brick with the median sub-brick. (default).
        flag: -spearman
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">file</span> <span class="n">containing</span> <span class="n">the</span> <span class="n">captured</span> <span class="n">standard</span> <span class="n">output</span>
</pre></div>
</div>
<span class="target" id="nipype-interfaces-afni-preprocess-qwarp"></span></div>
</div>
<div class="section" id="qwarp">
<span id="index-21"></span><h2>Qwarp<a class="headerlink" href="#qwarp" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L3488">Link to code</a></p>
<p>Wraps command <strong>3dQwarp</strong></p>
<p>A version of 3dQwarp
Allineate your images prior to passing them to this workflow.</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dQwarp.html">3dQwarp Documentation.</a></p>
<div class="section" id="id24">
<h3>Examples<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Qwarp</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;sub-01_dir-LR_epi.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">nopadWARP</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="s1">&#39;sub-01_dir-RL_epi.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">plusminus</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dQwarp -base sub-01_dir-RL_epi.nii.gz -source sub-01_dir-LR_epi.nii.gz -nopadWARP -prefix sub-01_dir-LR_epi_QW -plusminus&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">qwarp</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Qwarp</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;structural.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="s1">&#39;mni.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">resample</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dQwarp -base mni.nii -source structural.nii -prefix structural_QW -resample&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">qwarp</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Qwarp</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;structural.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="s1">&#39;epi.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">out_file</span> <span class="o">=</span> <span class="s1">&#39;anatSSQ.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">resample</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">lpc</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">verb</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">iwarp</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">blur</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dQwarp -base epi.nii -blur 0.0 3.0 -source structural.nii -iwarp -prefix anatSSQ.nii.gz -resample -verb -lpc&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">qwarp</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Qwarp</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;structural.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="s1">&#39;mni.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">duplo</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">blur</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dQwarp -base mni.nii -blur 0.0 3.0 -duplo -source structural.nii -prefix structural_QW&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">qwarp</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Qwarp</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;structural.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="s1">&#39;mni.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">duplo</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">minpatch</span> <span class="o">=</span> <span class="mi">25</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">blur</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">out_file</span> <span class="o">=</span> <span class="s1">&#39;Q25&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dQwarp -base mni.nii -blur 0.0 3.0 -duplo -source structural.nii -minpatch 25 -prefix Q25&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">qwarp</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp2</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Qwarp</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp2</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;structural.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp2</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="s1">&#39;mni.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp2</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">blur</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp2</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">out_file</span> <span class="o">=</span> <span class="s1">&#39;Q11&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp2</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">inilev</span> <span class="o">=</span> <span class="mi">7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp2</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">iniwarp</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Q25_warp+tlrc.HEAD&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp2</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dQwarp -base mni.nii -blur 0.0 2.0 -source structural.nii -inilev 7 -iniwarp Q25_warp+tlrc.HEAD -prefix Q11&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res2</span> <span class="o">=</span> <span class="n">qwarp2</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res2</span> <span class="o">=</span> <span class="n">qwarp2</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp3</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Qwarp</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp3</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;structural.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp3</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="s1">&#39;mni.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp3</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">allineate</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp3</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">allineate_opts</span> <span class="o">=</span> <span class="s1">&#39;-cose lpa -verb&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp3</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&quot;3dQwarp -allineate -allineate_opts &#39;-cose lpa -verb&#39; -base mni.nii -source structural.nii -prefix structural_QW&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res3</span> <span class="o">=</span> <span class="n">qwarp3</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
base_file: (an existing file name)
        Base image (opposite phase encoding direction than source image).
        flag: -base %s
in_file: (an existing file name)
        Source image (opposite phase encoding direction than base image).
        flag: -source %s

[Optional]
Qfinal: (a boolean)
        At the finest patch size (the final level), use Hermitequintic
        polynomials for the warp instead of cubic polynomials.* In a 3D
        &#39;patch&#39;, there are 2x2x2x3=24 cubic polynomial basisfunction
        parameters over which to optimize (2 polynomialsdependent on each of
        the x,y,z directions, and 3 differentdirections of displacement).*
        There are 3x3x3x3=81 quintic polynomial parameters per patch.* With
        -Qfinal, the final level will have more detail inthe allowed warps,
        at the cost of yet more CPU time.* However, no patch below 7x7x7 in
        size will be done with quinticpolynomials.* This option is also not
        usually needed, and is experimental.
        flag: -Qfinal
Qonly: (a boolean)
        Use Hermite quintic polynomials at all levels.* Very slow (about 4
        times longer). Also experimental.* Will produce a (discrete
        representation of a) C2 warp.
        flag: -Qonly
allineate: (a boolean)
        This option will make 3dQwarp run 3dAllineate first, to align the
        source dataset to the base with an affine transformation. It will
        then use that alignment as a starting point for the nonlinear
        warping.
        flag: -allineate
allineate_opts: (a unicode string)
        add extra options to the 3dAllineate command to be run by 3dQwarp.
        flag: -allineate_opts %s
        requires: allineate
allsave: (a boolean)
        This option lets you save the output warps from each levelof the
        refinement process. Mostly used for experimenting.* Cannot be used
        with -nopadWARP, -duplo, or -plusminus.* Will only save all the
        outputs if the program terminatesnormally -- if it crashes, or
        freezes, then all thesewarps are lost.
        flag: -allsave
        mutually_exclusive: nopadWARP, duplo, plusminus
args: (a unicode string)
        Additional parameters to the command
        flag: %s
ballopt: (a boolean)
        Normally, the incremental warp parameters are optimized insidea
        rectangular &#39;box&#39; (24 dimensional for cubic patches, 81 forquintic
        patches), whose limits define the amount of distortionallowed at
        each step. Using &#39;-ballopt&#39; switches these limitsto be applied to a
        &#39;ball&#39; (interior of a hypersphere), whichcan allow for larger
        incremental displacements. Use thisoption if you think things need
        to be able to move farther.
        flag: -ballopt
        mutually_exclusive: workhard, boxopt
baxopt: (a boolean)
        Use the &#39;box&#39; optimization limits instead of the &#39;ball&#39;[this is the
        default at present].* Note that if &#39;-workhard&#39; is used, then ball
        and box optimizationare alternated in the different iterations at
        each level, sothese two options have no effect in that case.
        flag: -boxopt
        mutually_exclusive: workhard, ballopt
blur: (a list of from 1 to 2 items which are a float)
        Gaussian blur the input images by &#39;bb&#39; (FWHM) voxels beforedoing the
        alignment (the output dataset will not be blurred).The default is
        2.345 (for no good reason).* Optionally, you can provide 2 values
        for &#39;bb&#39;, and thenthe first one is applied to the base volume, the
        secondto the source volume.--&gt;&gt;* e.g., &#39;-blur 0 3&#39; to skip blurring
        the base image(if the base is a blurry template, for example).* A
        negative blur radius means to use 3D median filtering,rather than
        Gaussian blurring. This type of filtering willbetter preserve edges,
        which can be important in alignment.* If the base is a template
        volume that is already blurry,you probably don&#39;t want to blur it
        again, but blurringthe source volume a little is probably a good
        idea, tohelp the program avoid trying to match tiny features.* Note
        that -duplo will blur the volumes some extraamount for the initial
        small-scale warping, to makethat phase of the program converge more
        rapidly.
        flag: -blur %s
duplo: (a boolean)
        Start off with 1/2 scale versions of the volumes,for getting a
        speedy coarse first alignment.* Then scales back up to register the
        full volumes.The goal is greater speed, and it seems to help
        thispositively piggish program to be more expeditious.* However,
        accuracy is somewhat lower with &#39;-duplo&#39;,for reasons that currenly
        elude Zhark; for this reason,the Emperor does not usually use
        &#39;-duplo&#39;.
        flag: -duplo
        mutually_exclusive: gridlist, maxlev, inilev, iniwarp, plusminus,
         allsave
emask: (an existing file name)
        Here, &#39;ee&#39; is a dataset to specify a mask of voxelsto EXCLUDE from
        the analysis -- all voxels in &#39;ee&#39;that are NONZERO will not be used
        in the alignment.* The base image always automasked -- the emask
        isextra, to indicate voxels you definitely DON&#39;T wantincluded in the
        matching process, even if they areinside the brain.
        flag: -emask %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
expad: (an integer (int or long))
        This option instructs the program to pad the warp by an extra&#39;EE&#39;
        voxels (and then 3dQwarp starts optimizing it).* This option is
        seldom needed, but can be useful if youmight later catenate the
        nonlinear warp -- via 3dNwarpCat --with an affine transformation
        that contains a large shift.Under that circumstance, the nonlinear
        warp might be shiftedpartially outside its original grid, so
        expanding that gridcan avoid this problem.* Note that this option
        perforce turns off &#39;-nopadWARP&#39;.
        flag: -expad %d
        mutually_exclusive: nopadWARP
gridlist: (an existing file name)
        This option provides an alternate way to specify the patchgrid sizes
        used in the warp optimization process. &#39;gl&#39; isa 1D file with a list
        of patches to use -- in most cases,you will want to use it in the
        following form:-gridlist &#39;1D: 0 151 101 75 51&#39;* Here, a 0 patch size
        means the global domain. Patch sizesotherwise should be odd integers
        &gt;= 5.* If you use the &#39;0&#39; patch size again after the first
        position,you will actually get an iteration at the size of
        thedefault patch level 1, where the patch sizes are 75% ofthe volume
        dimension. There is no way to force the programto literally repeat
        the sui generis step of lev=0.* You cannot use -gridlist with -duplo
        or -plusminus!
        flag: -gridlist %s
        mutually_exclusive: duplo, plusminus
hel: (a boolean)
        Hellinger distance: a matching function for the adventurousThis
        option has NOT be extensively tested for usefullnessand should be
        considered experimental at this infundibulum.
        flag: -hel
        mutually_exclusive: nmi, mi, lpc, lpa, pear
inilev: (an integer (int or long))
        The initial refinement &#39;level&#39; at which to start.* Usually used with
        -iniwarp; CANNOT be used with -duplo.* The combination of -inilev
        and -iniwarp lets you take theresults of a previous 3dQwarp run and
        refine them further:Note that the source dataset in the second run
        is the SAME asin the first run. If you don&#39;t see why this is
        necessary,then you probably need to seek help from an AFNI guru.
        flag: -inilev %d
        mutually_exclusive: duplo
iniwarp: (a list of items which are an existing file name)
        A dataset with an initial nonlinear warp to use.* If this option is
        not used, the initial warp is the identity.* You can specify a
        catenation of warps (in quotes) here, as inprogram 3dNwarpApply.* As
        a special case, if you just input an affine matrix in a .1Dfile,
        that will work also -- it is treated as giving the initialwarp via
        the string &quot;IDENT(base_dataset) matrix_file.aff12.1D&quot;.* You CANNOT
        use this option with -duplo !!* -iniwarp is usually used with
        -inilev to re-start 3dQwarp froma previous stopping point.
        flag: -iniwarp %s
        mutually_exclusive: duplo
iwarp: (a boolean)
        Do compute and save the _WARPINV file.
        flag: -iwarp
        mutually_exclusive: plusminus
lpa: (a boolean)
        Local Pearson maximizationThis option has not be extensively tested
        flag: -lpa
        mutually_exclusive: nmi, mi, lpc, hel, pear
lpc: (a boolean)
        Local Pearson minimization (i.e., EPI-T1 registration)This option
        has not be extensively testedIf you use &#39;-lpc&#39;, then &#39;-maxlev 0&#39; is
        automatically set.If you want to go to more refined levels, you can
        set &#39;-maxlev&#39;This should be set up to have lpc as the second to last
        argumentand maxlev as the second to last argument, as needed by
        AFNIUsing maxlev &gt; 1 is not recommended for EPI-T1 alignment.
        flag: -lpc, position: -2
        mutually_exclusive: nmi, mi, hel, lpa, pear
maxlev: (an integer (int or long))
        The initial refinement &#39;level&#39; at which to start.* Usually used with
        -iniwarp; CANNOT be used with -duplo.* The combination of -inilev
        and -iniwarp lets you take theresults of a previous 3dQwarp run and
        refine them further:Note that the source dataset in the second run
        is the SAME asin the first run. If you don&#39;t see why this is
        necessary,then you probably need to seek help from an AFNI guru.
        flag: -maxlev %d, position: -1
        mutually_exclusive: duplo
mi: (a boolean)
        Mutual Information: a matching function for the adventurousThis
        option has NOT be extensively tested for usefullnessand should be
        considered experimental at this infundibulum.
        flag: -mi
        mutually_exclusive: mi, hel, lpc, lpa, pear
minpatch: (an integer (int or long))
        * The value of mm should be an odd integer.* The default value of mm
        is 25.* For more accurate results than mm=25, try 19 or 13.* The
        smallest allowed patch size is 5.* You may want stop at a larger
        patch size (say 7 or 9) and usethe -Qfinal option to run that final
        level with quintic warps,which might run faster and provide the same
        degree of warp detail.* Trying to make two different brain volumes
        match in fine detailis usually a waste of time, especially in
        humans. There is toomuch variability in anatomy to match gyrus to
        gyrus accurately.For this reason, the default minimum patch size is
        25 voxels.Using a smaller &#39;-minpatch&#39; might try to force the warp
        tomatch features that do not match, and the result can be
        uselessimage distortions -- another reason to LOOK AT THE RESULTS.
        flag: -minpatch %d
nmi: (a boolean)
        Normalized Mutual Information: a matching function for the
        adventurousThis option has NOT be extensively tested for
        usefullnessand should be considered experimental at this
        infundibulum.
        flag: -nmi
        mutually_exclusive: nmi, hel, lpc, lpa, pear
noXdis: (a boolean)
        Warp will not displace in x directoin
        flag: -noXdis
noYdis: (a boolean)
        Warp will not displace in y directoin
        flag: -noYdis
noZdis: (a boolean)
        Warp will not displace in z directoin
        flag: -noZdis
noneg: (a boolean)
        Replace negative values in either input volume with 0.* If there ARE
        negative input values, and you do NOT use -noneg,then strict Pearson
        correlation will be used, since the &#39;clipped&#39;method only is
        implemented for non-negative volumes.* &#39;-noneg&#39; is not the default,
        since there might be situations whereyou want to align datasets with
        positive and negative values mixed.* But, in many cases, the
        negative values in a dataset are just theresult of interpolation
        artifacts (or other peculiarities), and sothey should be ignored.
        That is what &#39;-noneg&#39; is for.
        flag: -noneg
nopad: (a boolean)
        Do NOT use zero-padding on the 3D base and source images.[Default ==
        zero-pad, if needed]* The underlying model for deformations goes to
        zero at theedge of the volume being warped. However, if there
        issignificant data near an edge of the volume, then it won&#39;tget
        displaced much, and so the results might not be good.* Zero padding
        is designed as a way to work around this potentialproblem. You
        should NOT need the &#39;-nopad&#39; option for anyreason that Zhark can
        think of, but it is here to be symmetricalwith 3dAllineate.* Note
        that the output (warped from source) dataset will be on thebase
        dataset grid whether or not zero-padding is allowed. However,unless
        you use the following option, allowing zero-padding (i.e.,the
        default operation) will make the output WARP dataset(s) beon a
        larger grid (also see &#39;-expad&#39; below).
        flag: -nopad
nopadWARP: (a boolean)
        If for some reason you require the warp volume tomatch the base
        volume, then use this option to have the outputWARP dataset(s)
        truncated.
        flag: -nopadWARP
        mutually_exclusive: allsave, expad
nopenalty: (a boolean)
        Replace negative values in either input volume with 0.* If there ARE
        negative input values, and you do NOT use -noneg,then strict Pearson
        correlation will be used, since the &#39;clipped&#39;method only is
        implemented for non-negative volumes.* &#39;-noneg&#39; is not the default,
        since there might be situations whereyou want to align datasets with
        positive and negative values mixed.* But, in many cases, the
        negative values in a dataset are just theresult of interpolation
        artifacts (or other peculiarities), and sothey should be ignored.
        That is what &#39;-noneg&#39; is for.
        flag: -nopenalty
nowarp: (a boolean)
        Do not save the _WARP file.
        flag: -nowarp
noweight: (a boolean)
        If you want a binary weight (the old default), use this option.That
        is, each voxel in the base volume automask will beweighted the same
        in the computation of the cost functional.
        flag: -noweight
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out_file: (a file name)
        out_file pppSets the prefix for the output datasets.* The source
        dataset is warped to match the baseand gets prefix &#39;ppp&#39;. (Except if
        &#39;-plusminus&#39; is used.)* The final interpolation to this output
        dataset isdone using the &#39;wsinc5&#39; method. See the output of
        3dAllineate -HELP(in the &quot;Modifying &#39;-final wsinc5&#39;&quot; section) forthe
        lengthy technical details.* The 3D warp used is saved in a dataset
        withprefix &#39;ppp_WARP&#39; -- this dataset can be usedwith 3dNwarpApply
        and 3dNwarpCat, for example.* To be clear, this is the warp from
        source dataset coordinates to base dataset coordinates, where the
        values at each base grid point are the xyz displacments needed to
        move that grid point&#39;s xyz values to the corresponding xyz values in
        the source dataset: base( (x,y,z) + WARP(x,y,z) ) matches
        source(x,y,z) Another way to think of this warp is that it &#39;pulls&#39;
        values back from source space to base space.* 3dNwarpApply would use
        &#39;ppp_WARP&#39; to transform datasetsaligned with the source dataset to
        be aligned with thebase dataset.** If you do NOT want this warp
        saved, use the option &#39;-nowarp&#39;.--&gt;&gt; (However, this warp is usually
        the most valuable possible output!)* If you want to calculate and
        save the inverse 3D warp,use the option &#39;-iwarp&#39;. This inverse warp
        will then besaved in a dataset with prefix &#39;ppp_WARPINV&#39;.* This
        inverse warp could be used to transform data from basespace to
        source space, if you need to do such an operation.* You can easily
        compute the inverse later, say by a command like 3dNwarpCat -prefix
        Z_WARPINV &#39;INV(Z_WARP+tlrc)&#39;or the inverse can be computed as needed
        in 3dNwarpApply, like 3dNwarpApply -nwarp &#39;INV(Z_WARP+tlrc)&#39; -source
        Dataset.nii ...
        flag: -prefix %s
out_weight_file: (a file name)
        Write the weight volume to disk as a dataset
        flag: -wtprefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
overwrite: (a boolean)
        Overwrite outputs
        flag: -overwrite
pblur: (a list of from 1 to 2 items which are a float)
        Use progressive blurring; that is, for larger patch sizes,the amount
        of blurring is larger. The general idea is toavoid trying to match
        finer details when the patch sizeand incremental warps are coarse.
        When &#39;-blur&#39; is usedas well, it sets a minimum amount of blurring
        that willbe used. [06 Aug 2014 -- &#39;-pblur&#39; may become the default
        someday].* You can optionally give the fraction of the patch size
        thatis used for the progressive blur by providing a value between0
        and 0.25 after &#39;-pblur&#39;. If you provide TWO values, thethe first
        fraction is used for progressively blurring thebase image and the
        second for the source image. The defaultparameters when just
        &#39;-pblur&#39; is given is the same as givingthe options as &#39;-pblur 0.09
        0.09&#39;.* &#39;-pblur&#39; is useful when trying to match 2 volumes with
        highamounts of detail; e.g, warping one subject&#39;s brain image
        tomatch another&#39;s, or trying to warp to match a detailed template.*
        Note that using negative values with &#39;-blur&#39; means that
        theprogressive blurring will be done with median filters, ratherthan
        Gaussian linear blurring.--&gt;&gt;*** The combination of the -allineate
        and -pblur options will makethe results of using 3dQwarp to align to
        a template somewhatless sensitive to initial head position and
        scaling.
        flag: -pblur %s
pear: (a boolean)
        Use strict Pearson correlation for matching.* Not usually
        recommended, since the &#39;clipped Pearson&#39; methodused by default will
        reduce the impact of outlier values.
        flag: -pear
penfac: (a float)
        Use this value to weight the penalty.The default value is 1.Larger
        values mean thepenalty counts more, reducing grid
        distortions,insha&#39;Allah; &#39;-nopenalty&#39; is the same as &#39;-penfac 0&#39;.
        --&gt;&gt;* [23 Sep 2013] -- Zhark increased the default value of the
        penalty by a factor of 5, and also made it get progressively larger
        with each level of refinement. Thus, warping results will vary from
        earlier instances of 3dQwarp. * The progressive increase in the
        penalty at higher levels means that the &#39;cost function&#39; can actually
        look like the alignment is getting worse when the levels change. *
        IF you wish to turn off this progression, for whatever reason (e.g.,
        to keep compatibility with older results), use the option
        &#39;-penold&#39;.To be completely compatible with the older 3dQwarp, you&#39;ll
        also have to use &#39;-penfac 0.2&#39;.
        flag: -penfac %f
plusminus: (a boolean)
        Normally, the warp displacements dis(x) are defined to matchbase(x)
        to source(x+dis(x)). With this option, the matchis between
        base(x-dis(x)) and source(x+dis(x)) -- the twoimages &#39;meet in the
        middle&#39;.* One goal is to mimic the warping done to MRI EPI data
        byfield inhomogeneities, when registering between a &#39;blip up&#39;and a
        &#39;blip down&#39; down volume, which will have oppositedistortions.*
        Define Wp(x) = x+dis(x) and Wm(x) = x-dis(x). Then sincebase(Wm(x))
        matches source(Wp(x)), by substituting INV(Wm(x))wherever we see x,
        we have base(x) matches source(Wp(INV(Wm(x))));that is, the warp
        V(x) that one would get from the &#39;usual&#39; wayof running 3dQwarp is
        V(x) = Wp(INV(Wm(x))).* Conversely, we can calculate Wp(x) in terms
        of V(x) as follows:If V(x) = x + dv(x), define Vh(x) = x +
        dv(x)/2;then Wp(x) = V(INV(Vh(x)))* With the above formulas, it is
        possible to compute Wp(x) fromV(x) and vice-versa, using program
        3dNwarpCalc. The requisitecommands are left as an exercise for the
        aspiring AFNI Jedi Master.* You can use the semi-secret &#39;-pmBASE&#39;
        option to get the V(x)warp and the source dataset warped to base
        space, in addition tothe Wp(x) &#39;_PLUS&#39; and Wm(x) &#39;_MINUS&#39;
        warps.--&gt;&gt;* Alas: -plusminus does not work with -duplo or -allineate
        :-(* However, you can use -iniwarp with -plusminus :-)--&gt;&gt;* The
        outputs have _PLUS (from the source dataset) and _MINUS(from the
        base dataset) in their filenames, in addition tothe prefix. The
        -iwarp option, if present, will be ignored.
        flag: -plusminus
        mutually_exclusive: duplo, allsave, iwarp
quiet: (a boolean)
        Cut out most of the fun fun fun progress messages :-(
        flag: -quiet
        mutually_exclusive: verb
resample: (a boolean)
        This option simply resamples the source dataset to match thebase
        dataset grid. You can use this if the two datasetsoverlap well (as
        seen in the AFNI GUI), but are not on thesame 3D grid.* If they
        don&#39;t overlap well, allineate them first* The reampling here is done
        with the&#39;wsinc5&#39; method, which has very little blurring artifact.*
        If the base and source datasets ARE on the same 3D grid,then the
        -resample option will be ignored.* You CAN use -resample with these
        3dQwarp options:-plusminus -inilev -iniwarp -duplo
        flag: -resample
verb: (a boolean)
        more detailed description of the process
        flag: -verb
        mutually_exclusive: quiet
wball: (a list of from 5 to 5 items which are an integer (int or
         long))
        -wball x y z r fEnhance automatic weight from &#39;-useweight&#39; by a
        factorof 1+f*Gaussian(FWHM=r) centered in the base image atDICOM
        coordinates (x,y,z) and with radius &#39;r&#39;. Thegoal of this option is
        to try and make the alignmentbetter in a specific part of the
        brain.* Example: -wball 0 14 6 30 40to emphasize the thalamic area
        (in MNI/Talairach space).* The &#39;r&#39; parameter must be positive!* The
        &#39;f&#39; parameter must be between 1 and 100 (inclusive).* &#39;-wball&#39; does
        nothing if you input your own weightwith the &#39;-weight&#39; option.*
        &#39;-wball&#39; does change the binary weight created bythe &#39;-noweight&#39;
        option.* You can only use &#39;-wball&#39; once in a run of 3dQwarp.*** The
        effect of &#39;-wball&#39; is not dramatic. The exampleabove makes the
        average brain image across a collectionof subjects a little sharper
        in the thalamic area, whichmight have some small value. If you care
        enough aboutalignment to use &#39;-wball&#39;, then you should examine
        theresults from 3dQwarp for each subject, to see if thealignments
        are good enough for your purposes.
        flag: -wball %s
weight: (an existing file name)
        Instead of computing the weight from the base dataset,directly input
        the weight volume from dataset &#39;www&#39;.* Useful if you know what over
        parts of the base image youwant to emphasize or de-emphasize the
        matching functional.
        flag: -weight %s
wmask: (a tuple of the form: (an existing file name, a float))
        -wmask ws fSimilar to &#39;-wball&#39;, but here, you provide a dataset
        &#39;ws&#39;that indicates where to increase the weight.* The &#39;ws&#39; dataset
        must be on the same 3D grid as the base dataset.* &#39;ws&#39; is treated as
        a mask -- it only matters where itis nonzero -- otherwise, the
        values inside are not used.* After &#39;ws&#39; comes the factor &#39;f&#39; by
        which to increase theautomatically computed weight. Where &#39;ws&#39; is
        nonzero,the weighting will be multiplied by (1+f).* As with
        &#39;-wball&#39;, the factor &#39;f&#39; should be between 1 and 100.* You cannot
        use &#39;-wball&#39; and &#39;-wmask&#39; together!
        flag: -wpass %s %f
workhard: (a boolean)
        Iterate more times, which can help when the volumes arehard to align
        at all, or when you hope to get a more precisealignment.* Slows the
        program down (possibly a lot), of course.* When you combine
        &#39;-workhard&#39; with &#39;-duplo&#39;, only thefull size volumes get the extra
        iterations.* For finer control over which refinement levels work
        hard,you can use this option in the form (for example)
        -workhard:4:7which implies the extra iterations will be done at
        levels4, 5, 6, and 7, but not otherwise.* You can also use
        &#39;-superhard&#39; to iterate even more, butthis extra option will REALLY
        slow things down.--&gt;&gt;* Under most circumstances, you should not need
        to use either-workhard or -superhard.--&gt;&gt;* The fastest way to
        register to a template image is via the-duplo option, and without
        the -workhard or -superhard options.--&gt;&gt;* If you use this option in
        the form &#39;-Workhard&#39; (first letterin upper case), then the second
        iteration at each level isdone with quintic polynomial warps.
        flag: -workhard
        mutually_exclusive: boxopt, ballopt
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">base_warp</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">Displacement</span> <span class="ow">in</span> <span class="n">mm</span> <span class="k">for</span> <span class="n">the</span> <span class="n">base</span> <span class="n">image</span><span class="o">.</span><span class="n">If</span> <span class="n">plus</span> <span class="n">minus</span> <span class="ow">is</span> <span class="n">used</span><span class="p">,</span> <span class="n">this</span> <span class="ow">is</span>
        <span class="n">the</span> <span class="n">field</span> <span class="n">suceptibility</span> <span class="n">correctionwarp</span> <span class="p">(</span><span class="ow">in</span> <span class="s1">&#39;mm&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">base</span> <span class="n">image</span><span class="o">.</span>
        <span class="n">This</span> <span class="ow">is</span> <span class="n">only</span> <span class="n">output</span> <span class="k">if</span> <span class="n">plusminusor</span> <span class="n">iwarp</span> <span class="n">options</span> <span class="n">are</span> <span class="n">passed</span>
<span class="n">source_warp</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">Displacement</span> <span class="ow">in</span> <span class="n">mm</span> <span class="k">for</span> <span class="n">the</span> <span class="n">source</span> <span class="n">image</span><span class="o">.</span><span class="n">If</span> <span class="n">plusminus</span> <span class="ow">is</span> <span class="n">used</span> <span class="n">this</span> <span class="ow">is</span>
        <span class="n">the</span> <span class="n">field</span> <span class="n">suceptibility</span> <span class="n">correctionwarp</span> <span class="p">(</span><span class="ow">in</span> <span class="s1">&#39;mm&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">source</span> <span class="n">image</span><span class="o">.</span>
<span class="n">warped_base</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">Undistorted</span> <span class="n">base</span> <span class="n">file</span><span class="o">.</span>
<span class="n">warped_source</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">Warped</span> <span class="n">source</span> <span class="n">file</span><span class="o">.</span> <span class="n">If</span> <span class="n">plusminus</span> <span class="ow">is</span> <span class="n">used</span><span class="p">,</span> <span class="n">this</span> <span class="ow">is</span> <span class="n">the</span>
        <span class="n">undistortedsource</span> <span class="n">file</span><span class="o">.</span>
<span class="n">weights</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">Auto</span><span class="o">-</span><span class="n">computed</span> <span class="n">weight</span> <span class="n">volume</span><span class="o">.</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-qwarpplusminus"></span></div>
</div>
<div class="section" id="qwarpplusminus">
<span id="index-22"></span><h2>QwarpPlusMinus<a class="headerlink" href="#qwarpplusminus" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L3662">Link to code</a></p>
<p>Wraps command <strong>3dQwarp</strong></p>
<p>A version of 3dQwarp for performing field susceptibility correction
using two images with opposing phase encoding directions.</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dQwarp.html">3dQwarp Documentation.</a></p>
<div class="section" id="id26">
<h3>Examples<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">QwarpPlusMinus</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;sub-01_dir-LR_epi.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">nopadWARP</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">base_file</span> <span class="o">=</span> <span class="s1">&#39;sub-01_dir-RL_epi.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qwarp</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dQwarp -prefix Qwarp.nii.gz -plusminus -base sub-01_dir-RL_epi.nii.gz     -source sub-01_dir-LR_epi.nii.gz -nopadWARP&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">warp</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
base_file: (an existing file name)
        Base image (opposite phase encoding direction than source image).
        flag: -base %s
in_file: (an existing file name)
        Source image (opposite phase encoding direction than base image).
        flag: -source %s

[Optional]
Qfinal: (a boolean)
        At the finest patch size (the final level), use Hermitequintic
        polynomials for the warp instead of cubic polynomials.* In a 3D
        &#39;patch&#39;, there are 2x2x2x3=24 cubic polynomial basisfunction
        parameters over which to optimize (2 polynomialsdependent on each of
        the x,y,z directions, and 3 differentdirections of displacement).*
        There are 3x3x3x3=81 quintic polynomial parameters per patch.* With
        -Qfinal, the final level will have more detail inthe allowed warps,
        at the cost of yet more CPU time.* However, no patch below 7x7x7 in
        size will be done with quinticpolynomials.* This option is also not
        usually needed, and is experimental.
        flag: -Qfinal
Qonly: (a boolean)
        Use Hermite quintic polynomials at all levels.* Very slow (about 4
        times longer). Also experimental.* Will produce a (discrete
        representation of a) C2 warp.
        flag: -Qonly
allineate: (a boolean)
        This option will make 3dQwarp run 3dAllineate first, to align the
        source dataset to the base with an affine transformation. It will
        then use that alignment as a starting point for the nonlinear
        warping.
        flag: -allineate
allineate_opts: (a unicode string)
        add extra options to the 3dAllineate command to be run by 3dQwarp.
        flag: -allineate_opts %s
        requires: allineate
allsave: (a boolean)
        This option lets you save the output warps from each levelof the
        refinement process. Mostly used for experimenting.* Cannot be used
        with -nopadWARP, -duplo, or -plusminus.* Will only save all the
        outputs if the program terminatesnormally -- if it crashes, or
        freezes, then all thesewarps are lost.
        flag: -allsave
        mutually_exclusive: nopadWARP, duplo, plusminus
args: (a unicode string)
        Additional parameters to the command
        flag: %s
ballopt: (a boolean)
        Normally, the incremental warp parameters are optimized insidea
        rectangular &#39;box&#39; (24 dimensional for cubic patches, 81 forquintic
        patches), whose limits define the amount of distortionallowed at
        each step. Using &#39;-ballopt&#39; switches these limitsto be applied to a
        &#39;ball&#39; (interior of a hypersphere), whichcan allow for larger
        incremental displacements. Use thisoption if you think things need
        to be able to move farther.
        flag: -ballopt
        mutually_exclusive: workhard, boxopt
baxopt: (a boolean)
        Use the &#39;box&#39; optimization limits instead of the &#39;ball&#39;[this is the
        default at present].* Note that if &#39;-workhard&#39; is used, then ball
        and box optimizationare alternated in the different iterations at
        each level, sothese two options have no effect in that case.
        flag: -boxopt
        mutually_exclusive: workhard, ballopt
blur: (a list of from 1 to 2 items which are a float)
        Gaussian blur the input images by &#39;bb&#39; (FWHM) voxels beforedoing the
        alignment (the output dataset will not be blurred).The default is
        2.345 (for no good reason).* Optionally, you can provide 2 values
        for &#39;bb&#39;, and thenthe first one is applied to the base volume, the
        secondto the source volume.--&gt;&gt;* e.g., &#39;-blur 0 3&#39; to skip blurring
        the base image(if the base is a blurry template, for example).* A
        negative blur radius means to use 3D median filtering,rather than
        Gaussian blurring. This type of filtering willbetter preserve edges,
        which can be important in alignment.* If the base is a template
        volume that is already blurry,you probably don&#39;t want to blur it
        again, but blurringthe source volume a little is probably a good
        idea, tohelp the program avoid trying to match tiny features.* Note
        that -duplo will blur the volumes some extraamount for the initial
        small-scale warping, to makethat phase of the program converge more
        rapidly.
        flag: -blur %s
duplo: (a boolean)
        Start off with 1/2 scale versions of the volumes,for getting a
        speedy coarse first alignment.* Then scales back up to register the
        full volumes.The goal is greater speed, and it seems to help
        thispositively piggish program to be more expeditious.* However,
        accuracy is somewhat lower with &#39;-duplo&#39;,for reasons that currenly
        elude Zhark; for this reason,the Emperor does not usually use
        &#39;-duplo&#39;.
        flag: -duplo
        mutually_exclusive: gridlist, maxlev, inilev, iniwarp, plusminus,
         allsave
emask: (an existing file name)
        Here, &#39;ee&#39; is a dataset to specify a mask of voxelsto EXCLUDE from
        the analysis -- all voxels in &#39;ee&#39;that are NONZERO will not be used
        in the alignment.* The base image always automasked -- the emask
        isextra, to indicate voxels you definitely DON&#39;T wantincluded in the
        matching process, even if they areinside the brain.
        flag: -emask %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
expad: (an integer (int or long))
        This option instructs the program to pad the warp by an extra&#39;EE&#39;
        voxels (and then 3dQwarp starts optimizing it).* This option is
        seldom needed, but can be useful if youmight later catenate the
        nonlinear warp -- via 3dNwarpCat --with an affine transformation
        that contains a large shift.Under that circumstance, the nonlinear
        warp might be shiftedpartially outside its original grid, so
        expanding that gridcan avoid this problem.* Note that this option
        perforce turns off &#39;-nopadWARP&#39;.
        flag: -expad %d
        mutually_exclusive: nopadWARP
gridlist: (an existing file name)
        This option provides an alternate way to specify the patchgrid sizes
        used in the warp optimization process. &#39;gl&#39; isa 1D file with a list
        of patches to use -- in most cases,you will want to use it in the
        following form:-gridlist &#39;1D: 0 151 101 75 51&#39;* Here, a 0 patch size
        means the global domain. Patch sizesotherwise should be odd integers
        &gt;= 5.* If you use the &#39;0&#39; patch size again after the first
        position,you will actually get an iteration at the size of
        thedefault patch level 1, where the patch sizes are 75% ofthe volume
        dimension. There is no way to force the programto literally repeat
        the sui generis step of lev=0.* You cannot use -gridlist with -duplo
        or -plusminus!
        flag: -gridlist %s
        mutually_exclusive: duplo, plusminus
hel: (a boolean)
        Hellinger distance: a matching function for the adventurousThis
        option has NOT be extensively tested for usefullnessand should be
        considered experimental at this infundibulum.
        flag: -hel
        mutually_exclusive: nmi, mi, lpc, lpa, pear
inilev: (an integer (int or long))
        The initial refinement &#39;level&#39; at which to start.* Usually used with
        -iniwarp; CANNOT be used with -duplo.* The combination of -inilev
        and -iniwarp lets you take theresults of a previous 3dQwarp run and
        refine them further:Note that the source dataset in the second run
        is the SAME asin the first run. If you don&#39;t see why this is
        necessary,then you probably need to seek help from an AFNI guru.
        flag: -inilev %d
        mutually_exclusive: duplo
iniwarp: (a list of items which are an existing file name)
        A dataset with an initial nonlinear warp to use.* If this option is
        not used, the initial warp is the identity.* You can specify a
        catenation of warps (in quotes) here, as inprogram 3dNwarpApply.* As
        a special case, if you just input an affine matrix in a .1Dfile,
        that will work also -- it is treated as giving the initialwarp via
        the string &quot;IDENT(base_dataset) matrix_file.aff12.1D&quot;.* You CANNOT
        use this option with -duplo !!* -iniwarp is usually used with
        -inilev to re-start 3dQwarp froma previous stopping point.
        flag: -iniwarp %s
        mutually_exclusive: duplo
iwarp: (a boolean)
        Do compute and save the _WARPINV file.
        flag: -iwarp
        mutually_exclusive: plusminus
lpa: (a boolean)
        Local Pearson maximizationThis option has not be extensively tested
        flag: -lpa
        mutually_exclusive: nmi, mi, lpc, hel, pear
lpc: (a boolean)
        Local Pearson minimization (i.e., EPI-T1 registration)This option
        has not be extensively testedIf you use &#39;-lpc&#39;, then &#39;-maxlev 0&#39; is
        automatically set.If you want to go to more refined levels, you can
        set &#39;-maxlev&#39;This should be set up to have lpc as the second to last
        argumentand maxlev as the second to last argument, as needed by
        AFNIUsing maxlev &gt; 1 is not recommended for EPI-T1 alignment.
        flag: -lpc, position: -2
        mutually_exclusive: nmi, mi, hel, lpa, pear
maxlev: (an integer (int or long))
        The initial refinement &#39;level&#39; at which to start.* Usually used with
        -iniwarp; CANNOT be used with -duplo.* The combination of -inilev
        and -iniwarp lets you take theresults of a previous 3dQwarp run and
        refine them further:Note that the source dataset in the second run
        is the SAME asin the first run. If you don&#39;t see why this is
        necessary,then you probably need to seek help from an AFNI guru.
        flag: -maxlev %d, position: -1
        mutually_exclusive: duplo
mi: (a boolean)
        Mutual Information: a matching function for the adventurousThis
        option has NOT be extensively tested for usefullnessand should be
        considered experimental at this infundibulum.
        flag: -mi
        mutually_exclusive: mi, hel, lpc, lpa, pear
minpatch: (an integer (int or long))
        * The value of mm should be an odd integer.* The default value of mm
        is 25.* For more accurate results than mm=25, try 19 or 13.* The
        smallest allowed patch size is 5.* You may want stop at a larger
        patch size (say 7 or 9) and usethe -Qfinal option to run that final
        level with quintic warps,which might run faster and provide the same
        degree of warp detail.* Trying to make two different brain volumes
        match in fine detailis usually a waste of time, especially in
        humans. There is toomuch variability in anatomy to match gyrus to
        gyrus accurately.For this reason, the default minimum patch size is
        25 voxels.Using a smaller &#39;-minpatch&#39; might try to force the warp
        tomatch features that do not match, and the result can be
        uselessimage distortions -- another reason to LOOK AT THE RESULTS.
        flag: -minpatch %d
nmi: (a boolean)
        Normalized Mutual Information: a matching function for the
        adventurousThis option has NOT be extensively tested for
        usefullnessand should be considered experimental at this
        infundibulum.
        flag: -nmi
        mutually_exclusive: nmi, hel, lpc, lpa, pear
noXdis: (a boolean)
        Warp will not displace in x directoin
        flag: -noXdis
noYdis: (a boolean)
        Warp will not displace in y directoin
        flag: -noYdis
noZdis: (a boolean)
        Warp will not displace in z directoin
        flag: -noZdis
noneg: (a boolean)
        Replace negative values in either input volume with 0.* If there ARE
        negative input values, and you do NOT use -noneg,then strict Pearson
        correlation will be used, since the &#39;clipped&#39;method only is
        implemented for non-negative volumes.* &#39;-noneg&#39; is not the default,
        since there might be situations whereyou want to align datasets with
        positive and negative values mixed.* But, in many cases, the
        negative values in a dataset are just theresult of interpolation
        artifacts (or other peculiarities), and sothey should be ignored.
        That is what &#39;-noneg&#39; is for.
        flag: -noneg
nopad: (a boolean)
        Do NOT use zero-padding on the 3D base and source images.[Default ==
        zero-pad, if needed]* The underlying model for deformations goes to
        zero at theedge of the volume being warped. However, if there
        issignificant data near an edge of the volume, then it won&#39;tget
        displaced much, and so the results might not be good.* Zero padding
        is designed as a way to work around this potentialproblem. You
        should NOT need the &#39;-nopad&#39; option for anyreason that Zhark can
        think of, but it is here to be symmetricalwith 3dAllineate.* Note
        that the output (warped from source) dataset will be on thebase
        dataset grid whether or not zero-padding is allowed. However,unless
        you use the following option, allowing zero-padding (i.e.,the
        default operation) will make the output WARP dataset(s) beon a
        larger grid (also see &#39;-expad&#39; below).
        flag: -nopad
nopadWARP: (a boolean)
        If for some reason you require the warp volume tomatch the base
        volume, then use this option to have the outputWARP dataset(s)
        truncated.
        flag: -nopadWARP
        mutually_exclusive: allsave, expad
nopenalty: (a boolean)
        Replace negative values in either input volume with 0.* If there ARE
        negative input values, and you do NOT use -noneg,then strict Pearson
        correlation will be used, since the &#39;clipped&#39;method only is
        implemented for non-negative volumes.* &#39;-noneg&#39; is not the default,
        since there might be situations whereyou want to align datasets with
        positive and negative values mixed.* But, in many cases, the
        negative values in a dataset are just theresult of interpolation
        artifacts (or other peculiarities), and sothey should be ignored.
        That is what &#39;-noneg&#39; is for.
        flag: -nopenalty
nowarp: (a boolean)
        Do not save the _WARP file.
        flag: -nowarp
noweight: (a boolean)
        If you want a binary weight (the old default), use this option.That
        is, each voxel in the base volume automask will beweighted the same
        in the computation of the cost functional.
        flag: -noweight
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out_file: (a file name, nipype default value: Qwarp.nii.gz)
        Output file
        flag: -prefix %s, position: 0
out_weight_file: (a file name)
        Write the weight volume to disk as a dataset
        flag: -wtprefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
overwrite: (a boolean)
        Overwrite outputs
        flag: -overwrite
pblur: (a list of from 1 to 2 items which are a float)
        Use progressive blurring; that is, for larger patch sizes,the amount
        of blurring is larger. The general idea is toavoid trying to match
        finer details when the patch sizeand incremental warps are coarse.
        When &#39;-blur&#39; is usedas well, it sets a minimum amount of blurring
        that willbe used. [06 Aug 2014 -- &#39;-pblur&#39; may become the default
        someday].* You can optionally give the fraction of the patch size
        thatis used for the progressive blur by providing a value between0
        and 0.25 after &#39;-pblur&#39;. If you provide TWO values, thethe first
        fraction is used for progressively blurring thebase image and the
        second for the source image. The defaultparameters when just
        &#39;-pblur&#39; is given is the same as givingthe options as &#39;-pblur 0.09
        0.09&#39;.* &#39;-pblur&#39; is useful when trying to match 2 volumes with
        highamounts of detail; e.g, warping one subject&#39;s brain image
        tomatch another&#39;s, or trying to warp to match a detailed template.*
        Note that using negative values with &#39;-blur&#39; means that
        theprogressive blurring will be done with median filters, ratherthan
        Gaussian linear blurring.--&gt;&gt;*** The combination of the -allineate
        and -pblur options will makethe results of using 3dQwarp to align to
        a template somewhatless sensitive to initial head position and
        scaling.
        flag: -pblur %s
pear: (a boolean)
        Use strict Pearson correlation for matching.* Not usually
        recommended, since the &#39;clipped Pearson&#39; methodused by default will
        reduce the impact of outlier values.
        flag: -pear
penfac: (a float)
        Use this value to weight the penalty.The default value is 1.Larger
        values mean thepenalty counts more, reducing grid
        distortions,insha&#39;Allah; &#39;-nopenalty&#39; is the same as &#39;-penfac 0&#39;.
        --&gt;&gt;* [23 Sep 2013] -- Zhark increased the default value of the
        penalty by a factor of 5, and also made it get progressively larger
        with each level of refinement. Thus, warping results will vary from
        earlier instances of 3dQwarp. * The progressive increase in the
        penalty at higher levels means that the &#39;cost function&#39; can actually
        look like the alignment is getting worse when the levels change. *
        IF you wish to turn off this progression, for whatever reason (e.g.,
        to keep compatibility with older results), use the option
        &#39;-penold&#39;.To be completely compatible with the older 3dQwarp, you&#39;ll
        also have to use &#39;-penfac 0.2&#39;.
        flag: -penfac %f
plusminus: (a boolean, nipype default value: True)
        Normally, the warp displacements dis(x) are defined to matchbase(x)
        to source(x+dis(x)). With this option, the matchis between
        base(x-dis(x)) and source(x+dis(x)) -- the twoimages &#39;meet in the
        middle&#39;. For more info, view Qwarp` interface
        flag: -plusminus, position: 1
        mutually_exclusive: duplo, allsave, iwarp
quiet: (a boolean)
        Cut out most of the fun fun fun progress messages :-(
        flag: -quiet
        mutually_exclusive: verb
resample: (a boolean)
        This option simply resamples the source dataset to match thebase
        dataset grid. You can use this if the two datasetsoverlap well (as
        seen in the AFNI GUI), but are not on thesame 3D grid.* If they
        don&#39;t overlap well, allineate them first* The reampling here is done
        with the&#39;wsinc5&#39; method, which has very little blurring artifact.*
        If the base and source datasets ARE on the same 3D grid,then the
        -resample option will be ignored.* You CAN use -resample with these
        3dQwarp options:-plusminus -inilev -iniwarp -duplo
        flag: -resample
source_file: (an existing file name)
        Source image (opposite phase encoding direction than base image)
        flag: -source %s
verb: (a boolean)
        more detailed description of the process
        flag: -verb
        mutually_exclusive: quiet
wball: (a list of from 5 to 5 items which are an integer (int or
         long))
        -wball x y z r fEnhance automatic weight from &#39;-useweight&#39; by a
        factorof 1+f*Gaussian(FWHM=r) centered in the base image atDICOM
        coordinates (x,y,z) and with radius &#39;r&#39;. Thegoal of this option is
        to try and make the alignmentbetter in a specific part of the
        brain.* Example: -wball 0 14 6 30 40to emphasize the thalamic area
        (in MNI/Talairach space).* The &#39;r&#39; parameter must be positive!* The
        &#39;f&#39; parameter must be between 1 and 100 (inclusive).* &#39;-wball&#39; does
        nothing if you input your own weightwith the &#39;-weight&#39; option.*
        &#39;-wball&#39; does change the binary weight created bythe &#39;-noweight&#39;
        option.* You can only use &#39;-wball&#39; once in a run of 3dQwarp.*** The
        effect of &#39;-wball&#39; is not dramatic. The exampleabove makes the
        average brain image across a collectionof subjects a little sharper
        in the thalamic area, whichmight have some small value. If you care
        enough aboutalignment to use &#39;-wball&#39;, then you should examine
        theresults from 3dQwarp for each subject, to see if thealignments
        are good enough for your purposes.
        flag: -wball %s
weight: (an existing file name)
        Instead of computing the weight from the base dataset,directly input
        the weight volume from dataset &#39;www&#39;.* Useful if you know what over
        parts of the base image youwant to emphasize or de-emphasize the
        matching functional.
        flag: -weight %s
wmask: (a tuple of the form: (an existing file name, a float))
        -wmask ws fSimilar to &#39;-wball&#39;, but here, you provide a dataset
        &#39;ws&#39;that indicates where to increase the weight.* The &#39;ws&#39; dataset
        must be on the same 3D grid as the base dataset.* &#39;ws&#39; is treated as
        a mask -- it only matters where itis nonzero -- otherwise, the
        values inside are not used.* After &#39;ws&#39; comes the factor &#39;f&#39; by
        which to increase theautomatically computed weight. Where &#39;ws&#39; is
        nonzero,the weighting will be multiplied by (1+f).* As with
        &#39;-wball&#39;, the factor &#39;f&#39; should be between 1 and 100.* You cannot
        use &#39;-wball&#39; and &#39;-wmask&#39; together!
        flag: -wpass %s %f
workhard: (a boolean)
        Iterate more times, which can help when the volumes arehard to align
        at all, or when you hope to get a more precisealignment.* Slows the
        program down (possibly a lot), of course.* When you combine
        &#39;-workhard&#39; with &#39;-duplo&#39;, only thefull size volumes get the extra
        iterations.* For finer control over which refinement levels work
        hard,you can use this option in the form (for example)
        -workhard:4:7which implies the extra iterations will be done at
        levels4, 5, 6, and 7, but not otherwise.* You can also use
        &#39;-superhard&#39; to iterate even more, butthis extra option will REALLY
        slow things down.--&gt;&gt;* Under most circumstances, you should not need
        to use either-workhard or -superhard.--&gt;&gt;* The fastest way to
        register to a template image is via the-duplo option, and without
        the -workhard or -superhard options.--&gt;&gt;* If you use this option in
        the form &#39;-Workhard&#39; (first letterin upper case), then the second
        iteration at each level isdone with quintic polynomial warps.
        flag: -workhard
        mutually_exclusive: boxopt, ballopt
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">base_warp</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">Displacement</span> <span class="ow">in</span> <span class="n">mm</span> <span class="k">for</span> <span class="n">the</span> <span class="n">base</span> <span class="n">image</span><span class="o">.</span><span class="n">If</span> <span class="n">plus</span> <span class="n">minus</span> <span class="ow">is</span> <span class="n">used</span><span class="p">,</span> <span class="n">this</span> <span class="ow">is</span>
        <span class="n">the</span> <span class="n">field</span> <span class="n">suceptibility</span> <span class="n">correctionwarp</span> <span class="p">(</span><span class="ow">in</span> <span class="s1">&#39;mm&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">base</span> <span class="n">image</span><span class="o">.</span>
        <span class="n">This</span> <span class="ow">is</span> <span class="n">only</span> <span class="n">output</span> <span class="k">if</span> <span class="n">plusminusor</span> <span class="n">iwarp</span> <span class="n">options</span> <span class="n">are</span> <span class="n">passed</span>
<span class="n">source_warp</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">Displacement</span> <span class="ow">in</span> <span class="n">mm</span> <span class="k">for</span> <span class="n">the</span> <span class="n">source</span> <span class="n">image</span><span class="o">.</span><span class="n">If</span> <span class="n">plusminus</span> <span class="ow">is</span> <span class="n">used</span> <span class="n">this</span> <span class="ow">is</span>
        <span class="n">the</span> <span class="n">field</span> <span class="n">suceptibility</span> <span class="n">correctionwarp</span> <span class="p">(</span><span class="ow">in</span> <span class="s1">&#39;mm&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">source</span> <span class="n">image</span><span class="o">.</span>
<span class="n">warped_base</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">Undistorted</span> <span class="n">base</span> <span class="n">file</span><span class="o">.</span>
<span class="n">warped_source</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">Warped</span> <span class="n">source</span> <span class="n">file</span><span class="o">.</span> <span class="n">If</span> <span class="n">plusminus</span> <span class="ow">is</span> <span class="n">used</span><span class="p">,</span> <span class="n">this</span> <span class="ow">is</span> <span class="n">the</span>
        <span class="n">undistortedsource</span> <span class="n">file</span><span class="o">.</span>
<span class="n">weights</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">Auto</span><span class="o">-</span><span class="n">computed</span> <span class="n">weight</span> <span class="n">volume</span><span class="o">.</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-roistats"></span></div>
</div>
<div class="section" id="roistats">
<span id="index-23"></span><h2>ROIStats<a class="headerlink" href="#roistats" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L1823">Link to code</a></p>
<p>Wraps command <strong>3dROIstats</strong></p>
<p>Display statistics over masked regions</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dROIstats.html">3dROIstats Documentation.</a></p>
<div class="section" id="id27">
<h3>Examples<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roistats</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">ROIStats</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roistats</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roistats</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">mask</span> <span class="o">=</span> <span class="s1">&#39;skeleton_mask.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roistats</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">quiet</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roistats</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dROIstats -quiet -mask skeleton_mask.nii.gz functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">roistats</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input file to 3dROIstats
        flag: %s, position: -1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
mask: (an existing file name)
        input mask
        flag: -mask %s, position: 3
mask_f2short: (a boolean)
        Tells the program to convert a float mask to short integers, by
        simple rounding.
        flag: -mask_f2short, position: 2
quiet: (a boolean)
        execute quietly
        flag: -quiet, position: 1
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stats</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">tab</span> <span class="n">separated</span> <span class="n">values</span> <span class="n">file</span>
</pre></div>
</div>
<span class="target" id="nipype-interfaces-afni-preprocess-retroicor"></span></div>
</div>
<div class="section" id="retroicor">
<span id="index-24"></span><h2>Retroicor<a class="headerlink" href="#retroicor" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L1903">Link to code</a></p>
<p>Wraps command <strong>3dretroicor</strong></p>
<p>Performs Retrospective Image Correction for physiological
motion effects, using a slightly modified version of the
RETROICOR algorithm</p>
<p>The durations of the physiological inputs are assumed to equal
the duration of the dataset. Any constant sampling rate may be
used, but 40 Hz seems to be acceptable. This program’s cardiac
peak detection algorithm is rather simplistic, so you might try
using the scanner’s cardiac gating output (transform it to a
spike wave if necessary).</p>
<p>This program uses slice timing information embedded in the
dataset to estimate the proper cardiac/respiratory phase for
each slice. It makes sense to run this program before any
program that may destroy the slice timings (e.g. 3dvolreg for
motion correction).</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dretroicor.html">3dretroicor Documentation.</a></p>
<div class="section" id="id28">
<h3>Examples<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ret</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Retroicor</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ret</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ret</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">card</span> <span class="o">=</span> <span class="s1">&#39;mask.1D&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ret</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">resp</span> <span class="o">=</span> <span class="s1">&#39;resp.1D&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ret</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">outputtype</span> <span class="o">=</span> <span class="s1">&#39;NIFTI&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ret</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dretroicor -prefix functional_retroicor.nii -resp resp.1D -card mask.1D functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">ret</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input file to 3dretroicor
        flag: %s, position: -1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
card: (an existing file name)
        1D cardiac data file for cardiac correction
        flag: -card %s, position: -2
cardphase: (a file name)
        Filename for 1D cardiac phase output
        flag: -cardphase %s, position: -6
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
order: (an integer (int or long))
        The order of the correction (2 is typical)
        flag: -order %s, position: -5
out_file: (a file name)
        output image file name
        flag: -prefix %s, position: 1
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
resp: (an existing file name)
        1D respiratory waveform data for correction
        flag: -resp %s, position: -3
respphase: (a file name)
        Filename for 1D resp phase output
        flag: -respphase %s, position: -7
threshold: (an integer (int or long))
        Threshold for detection of R-wave peaks in input (Make sure it is
        above the background noise level, Try 3/4 or 4/5 times range plus
        minimum)
        flag: -threshold %d, position: -4
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-seg"></span></div>
</div>
<div class="section" id="seg">
<span id="index-25"></span><h2>Seg<a class="headerlink" href="#seg" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L2001">Link to code</a></p>
<p>Wraps command <strong>3dSeg</strong></p>
<p>3dSeg segments brain volumes into tissue classes. The program allows
for adding a variety of global and voxelwise priors. However for the
moment, only mixing fractions and MRF are documented.</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dSeg.html">3dSeg Documentation.</a></p>
<div class="section" id="id29">
<h3>Examples<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces.afni</span> <span class="k">import</span> <span class="n">preprocess</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seg</span> <span class="o">=</span> <span class="n">preprocess</span><span class="o">.</span><span class="n">Seg</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seg</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;structural.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seg</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">mask</span> <span class="o">=</span> <span class="s1">&#39;AUTO&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seg</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dSeg -mask AUTO -anat structural.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">seg</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        ANAT is the volume to segment
        flag: -anat %s, position: -1
mask: (&#39;AUTO&#39; or an existing file name)
        only non-zero voxels in mask are analyzed. mask can either be a
        dataset or the string &quot;AUTO&quot; which would use AFNI&#39;s automask
        function to create the mask.
        flag: -mask %s, position: -2

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
bias_classes: (a unicode string)
        A semicolon delimited string of classes that contribute to the
        estimation of the bias field
        flag: -bias_classes %s
bias_fwhm: (a float)
        The amount of blurring used when estimating the field bias with the
        Wells method
        flag: -bias_fwhm %f
blur_meth: (&#39;BFT&#39; or &#39;BIM&#39;)
        set the blurring method for bias field estimation
        flag: -blur_meth %s
bmrf: (a float)
        Weighting factor controlling spatial homogeneity of the
        classifications
        flag: -bmrf %f
classes: (a unicode string)
        CLASS_STRING is a semicolon delimited string of class labels
        flag: -classes %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
main_N: (an integer (int or long))
        Number of iterations to perform.
        flag: -main_N %d
mixfloor: (a float)
        Set the minimum value for any class&#39;s mixing fraction
        flag: -mixfloor %f
mixfrac: (a unicode string)
        MIXFRAC sets up the volume-wide (within mask) tissue fractions while
        initializing the segmentation (see IGNORE for exception)
        flag: -mixfrac %s
prefix: (a unicode string)
        the prefix for the output folder containing all output volumes
        flag: -prefix %s
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<span class="target" id="nipype-interfaces-afni-preprocess-skullstrip"></span></div>
</div>
<div class="section" id="skullstrip">
<span id="index-26"></span><h2>SkullStrip<a class="headerlink" href="#skullstrip" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L2058">Link to code</a></p>
<p>Wraps command <strong>3dSkullStrip</strong></p>
<p>A program to extract the brain from surrounding tissue from MRI
T1-weighted images.
TODO Add optional arguments.</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dSkullStrip.html">3dSkullStrip Documentation.</a></p>
<div class="section" id="id30">
<h3>Examples<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">skullstrip</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">SkullStrip</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">skullstrip</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">skullstrip</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="s1">&#39;-o_ply&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">skullstrip</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dSkullStrip -input functional.nii -o_ply -prefix functional_skullstrip&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">skullstrip</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input file to 3dSkullStrip
        flag: -input %s, position: 1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out_file: (a file name)
        output image file name
        flag: -prefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-tcorr1d"></span></div>
</div>
<div class="section" id="tcorr1d">
<span id="index-27"></span><h2>TCorr1D<a class="headerlink" href="#tcorr1d" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L2140">Link to code</a></p>
<p>Wraps command <strong>3dTcorr1D</strong></p>
<p>Computes the correlation coefficient between each voxel time series
in the input 3D+time dataset.</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dTcorr1D.html">3dTcorr1D Documentation.</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcorr1D</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">TCorr1D</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcorr1D</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">xset</span><span class="o">=</span> <span class="s1">&#39;u_rc1s1_Template.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcorr1D</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">y_1d</span> <span class="o">=</span> <span class="s1">&#39;seed.1D&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcorr1D</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dTcorr1D -prefix u_rc1s1_Template_correlation.nii.gz  u_rc1s1_Template.nii  seed.1D&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">tcorr1D</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
xset: (an existing file name)
        3d+time dataset input
        flag:  %s, position: -2
y_1d: (an existing file name)
        1D time series file input
        flag:  %s, position: -1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
ktaub: (a boolean)
        Correlation is the Kendall&#39;s tau_b correlation coefficient
        flag:  -ktaub, position: 1
        mutually_exclusive: pearson, spearman, quadrant
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out_file: (a file name)
        output filename prefix
        flag: -prefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
pearson: (a boolean)
        Correlation is the normal Pearson correlation coefficient
        flag:  -pearson, position: 1
        mutually_exclusive: spearman, quadrant, ktaub
quadrant: (a boolean)
        Correlation is the quadrant correlation coefficient
        flag:  -quadrant, position: 1
        mutually_exclusive: pearson, spearman, ktaub
spearman: (a boolean)
        Correlation is the Spearman (rank) correlation coefficient
        flag:  -spearman, position: 1
        mutually_exclusive: pearson, quadrant, ktaub
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span> <span class="n">containing</span> <span class="n">correlations</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-tcorrmap"></span></div>
<div class="section" id="tcorrmap">
<span id="index-28"></span><h2>TCorrMap<a class="headerlink" href="#tcorrmap" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L2242">Link to code</a></p>
<p>Wraps command <strong>3dTcorrMap</strong></p>
<p>For each voxel time series, computes the correlation between it
and all other voxels, and combines this set of values into the
output dataset(s) in some way.</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dTcorrMap.html">3dTcorrMap Documentation.</a></p>
<div class="section" id="id31">
<h3>Examples<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcm</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">TCorrMap</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcm</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcm</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">mask</span> <span class="o">=</span> <span class="s1">&#39;mask.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcm</span><span class="o">.</span><span class="n">mean_file</span> <span class="o">=</span> <span class="s1">&#39;functional_meancorr.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcm</span><span class="o">.</span><span class="n">cmdline</span> <span class="c1"># doctest: +SKIP</span>
<span class="go">&#39;3dTcorrMap -input functional.nii -mask mask.nii -Mean functional_meancorr.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">tcm</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        flag: -input %s

[Optional]
absolute_threshold: (a file name)
        flag: -Thresh %f %s
        mutually_exclusive: absolute_threshold, var_absolute_threshold,
         var_absolute_threshold_normalize
args: (a unicode string)
        Additional parameters to the command
        flag: %s
automask: (a boolean)
        flag: -automask
average_expr: (a file name)
        flag: -Aexpr %s %s
        mutually_exclusive: average_expr, average_expr_nonzero, sum_expr
average_expr_nonzero: (a file name)
        flag: -Cexpr %s %s
        mutually_exclusive: average_expr, average_expr_nonzero, sum_expr
bandpass: (a tuple of the form: (a float, a float))
        flag: -bpass %f %f
blur_fwhm: (a float)
        flag: -Gblur %f
correlation_maps: (a file name)
        flag: -CorrMap %s
correlation_maps_masked: (a file name)
        flag: -CorrMask %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
expr: (a unicode string)
histogram: (a file name)
        flag: -Hist %d %s
histogram_bin_numbers: (an integer (int or long))
mask: (an existing file name)
        flag: -mask %s
mean_file: (a file name)
        flag: -Mean %s
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out_file: (a file name)
        output image file name
        flag: -prefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
pmean: (a file name)
        flag: -Pmean %s
polort: (an integer (int or long))
        flag: -polort %d
qmean: (a file name)
        flag: -Qmean %s
regress_out_timeseries: (a file name)
        flag: -ort %s
seeds: (an existing file name)
        flag: -seed %s
        mutually_exclusive: s, e, e, d, s, _, w, i, d, t, h
seeds_width: (a float)
        flag: -Mseed %f
        mutually_exclusive: s, e, e, d, s
sum_expr: (a file name)
        flag: -Sexpr %s %s
        mutually_exclusive: average_expr, average_expr_nonzero, sum_expr
thresholds: (a list of items which are an integer (int or long))
var_absolute_threshold: (a file name)
        flag: -VarThresh %f %f %f %s
        mutually_exclusive: absolute_threshold, var_absolute_threshold,
         var_absolute_threshold_normalize
var_absolute_threshold_normalize: (a file name)
        flag: -VarThreshN %f %f %f %s
        mutually_exclusive: absolute_threshold, var_absolute_threshold,
         var_absolute_threshold_normalize
zmean: (a file name)
        flag: -Zmean %s
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">absolute_threshold</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
<span class="n">average_expr</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
<span class="n">average_expr_nonzero</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
<span class="n">correlation_maps</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
<span class="n">correlation_maps_masked</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
<span class="n">histogram</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
<span class="n">mean_file</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
<span class="n">pmean</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
<span class="n">qmean</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
<span class="n">sum_expr</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
<span class="n">var_absolute_threshold</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
<span class="n">var_absolute_threshold_normalize</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
<span class="n">zmean</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-tcorrelate"></span></div>
</div>
<div class="section" id="tcorrelate">
<span id="index-29"></span><h2>TCorrelate<a class="headerlink" href="#tcorrelate" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L2308">Link to code</a></p>
<p>Wraps command <strong>3dTcorrelate</strong></p>
<p>Computes the correlation coefficient between corresponding voxel
time series in two input 3D+time datasets ‘xset’ and ‘yset’</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dTcorrelate.html">3dTcorrelate Documentation.</a></p>
<div class="section" id="id32">
<h3>Examples<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcorrelate</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">TCorrelate</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcorrelate</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">xset</span><span class="o">=</span> <span class="s1">&#39;u_rc1s1_Template.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcorrelate</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">yset</span> <span class="o">=</span> <span class="s1">&#39;u_rc1s2_Template.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcorrelate</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">out_file</span> <span class="o">=</span> <span class="s1">&#39;functional_tcorrelate.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcorrelate</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">polort</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcorrelate</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">pearson</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcorrelate</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dTcorrelate -prefix functional_tcorrelate.nii.gz -pearson -polort -1 u_rc1s1_Template.nii u_rc1s2_Template.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">tcarrelate</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
xset: (an existing file name)
        input xset
        flag: %s, position: -2
yset: (an existing file name)
        input yset
        flag: %s, position: -1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out_file: (a file name)
        output image file name
        flag: -prefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
pearson: (a boolean)
        Correlation is the normal Pearson correlation coefficient
        flag: -pearson
polort: (an integer (int or long))
        Remove polynomical trend of order m
        flag: -polort %d
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-tnorm"></span></div>
</div>
<div class="section" id="tnorm">
<span id="index-30"></span><h2>TNorm<a class="headerlink" href="#tnorm" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L2371">Link to code</a></p>
<p>Wraps command <strong>3dTnorm</strong></p>
<p>Shifts voxel time series from input so that seperate slices are aligned
to the same temporal origin.</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dTnorm.html">3dTnorm Documentation.</a></p>
<div class="section" id="id33">
<h3>Examples<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tnorm</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">TNorm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tnorm</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tnorm</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">norm2</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tnorm</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">out_file</span> <span class="o">=</span> <span class="s1">&#39;rm.errts.unit errts+tlrc&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tnorm</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dTnorm -norm2 -prefix rm.errts.unit errts+tlrc functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">tshift</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input file to 3dTNorm
        flag: %s, position: -1

[Optional]
L1fit: (a boolean)
        Detrend with L1 regression (L2 is the default)
         * This option is here just for the hell of it
        flag: -L1fit
args: (a unicode string)
        Additional parameters to the command
        flag: %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
norm1: (a boolean)
        L1 normalize (sum of absolute values = 1)
        flag: -norm1
norm2: (a boolean)
        L2 normalize (sum of squares = 1) [DEFAULT]
        flag: -norm2
normR: (a boolean)
        normalize so sum of squares = number of time points * e.g., so RMS =
        1.
        flag: -normR
normx: (a boolean)
        Scale so max absolute value = 1 (L_infinity norm)
        flag: -normx
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out_file: (a file name)
        output image file name
        flag: -prefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
polort: (an integer (int or long))
        Detrend with polynomials of order p before normalizing
         [DEFAULT = don&#39;t do this]
         * Use &#39;-polort 0&#39; to remove the mean, for example
        flag: -polort %s
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-tproject"></span></div>
</div>
<div class="section" id="tproject">
<span id="index-31"></span><h2>TProject<a class="headerlink" href="#tproject" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L2537">Link to code</a></p>
<p>Wraps command <strong>3dTproject</strong></p>
<p>This program projects (detrends) out various ‘nuisance’ time series from
each voxel in the input dataset.  Note that all the projections are done
via linear regression, including the frequency-based options such
as ‘-passband’.  In this way, you can bandpass time-censored data, and at
the same time, remove other time series of no interest
(e.g., physiological estimates, motion parameters).
Shifts voxel time series from input so that seperate slices are aligned to
the same temporal origin.</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dTproject.html">3dTproject Documentation.</a></p>
<div class="section" id="id34">
<h3>Examples<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tproject</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">TProject</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tproject</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tproject</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">bandpass</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.00667</span><span class="p">,</span> <span class="mi">99999</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tproject</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">polort</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tproject</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">automask</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tproject</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">out_file</span> <span class="o">=</span> <span class="s1">&#39;projected.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tproject</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dTproject -input functional.nii -automask -bandpass 0.00667 99999 -polort 3 -prefix projected.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">tproject</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input file to 3dTproject
        flag: -input %s, position: 1

[Optional]
TR: (a float)
        Use time step dd for the frequency calculations,
         rather than the value stored in the dataset header.
        flag: -TR %g
args: (a unicode string)
        Additional parameters to the command
        flag: %s
automask: (a boolean)
        Generate a mask automatically
        flag: -automask
        mutually_exclusive: mask
bandpass: (a tuple of the form: (a float, a float))
        Remove all frequencies EXCEPT those in the range
        flag: -bandpass %g %g
blur: (a float)
        Blur (inside the mask only) with a filter that has
         width (FWHM) of fff millimeters.
         ++ Spatial blurring (if done) is after the time
         series filtering.
        flag: -blur %g
cenmode: (&#39;KILL&#39; or &#39;ZERO&#39; or &#39;NTRP&#39;)
        specifies how censored time points are treated in
         the output dataset:
         + mode = ZERO ==&gt; put zero values in their place
         ==&gt; output datset is same length as input
         + mode = KILL ==&gt; remove those time points
         ==&gt; output dataset is shorter than input
         + mode = NTRP ==&gt; censored values are replaced by interpolated
         neighboring (in time) non-censored values,
         BEFORE any projections, and then the
         analysis proceeds without actual removal
         of any time points -- this feature is to
         keep the Spanish Inquisition happy.
         * The default mode is KILL !!!
        flag: -cenmode %s
censor: (an existing file name)
        filename of censor .1D time series
         * This is a file of 1s and 0s, indicating which
         time points are to be included (1) and which are
         to be excluded (0).
        flag: -censor %s
censortr: (a list of items which are a unicode string)
        list of strings that specify time indexes
         to be removed from the analysis. Each string is
         of one of the following forms:
         37 =&gt; remove global time index #37
         2:37 =&gt; remove time index #37 in run #2
         37..47 =&gt; remove global time indexes #37-47
         37-47 =&gt; same as above
         2:37..47 =&gt; remove time indexes #37-47 in run #2
         *:0-2 =&gt; remove time indexes #0-2 in all runs
         +Time indexes within each run start at 0.
         +Run indexes start at 1 (just be to confusing).
         +N.B.: 2:37,47 means index #37 in run #2 and
         global time index 47; it does NOT mean
         index #37 in run #2 AND index #47 in run #2.
        flag: -CENSORTR %s
concat: (an existing file name)
        The catenation file, as in 3dDeconvolve, containing the
         TR indexes of the start points for each contiguous run
         within the input dataset (the first entry should be 0).
         ++ Also as in 3dDeconvolve, if the input dataset is
         automatically catenated from a collection of datasets,
         then the run start indexes are determined directly,
         and &#39;-concat&#39; is not needed (and will be ignored).
         ++ Each run must have at least 9 time points AFTER
         censoring, or the program will not work!
         ++ The only use made of this input is in setting up
         the bandpass/stopband regressors.
         ++ &#39;-ort&#39; and &#39;-dsort&#39; regressors run through all time
         points, as read in. If you want separate projections
         in each run, then you must either break these ort files
         into appropriate components, OR you must run 3dTproject
         for each run separately, using the appropriate pieces
         from the ort files via the &#39;{...}&#39; selector for the
         1D files and the &#39;[...]&#39; selector for the datasets.
        flag: -concat %s
dsort: (a list of items which are an existing file name)
        Remove the 3D+time time series in dataset fset.
         ++ That is, &#39;fset&#39; contains a different nuisance time
         series for each voxel (e.g., from AnatICOR).
         ++ Multiple -dsort options are allowed.
        flag: -dsort %s...
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
mask: (an existing file name)
        Only operate on voxels nonzero in the mset dataset.
         ++ Voxels outside the mask will be filled with zeros.
         ++ If no masking option is given, then all voxels
         will be processed.
        flag: -mask %s
noblock: (a boolean)
        Also as in 3dDeconvolve, if you want the program to treat
         an auto-catenated dataset as one long run, use this option.
         ++ However, &#39;-noblock&#39; will not affect catenation if you use
         the &#39;-concat&#39; option.
        flag: -noblock
norm: (a boolean)
        Normalize each output time series to have sum of
         squares = 1. This is the LAST operation.
        flag: -norm
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
ort: (an existing file name)
        Remove each column in file
         ++ Each column will have its mean removed.
        flag: -ort %s
out_file: (a file name)
        output image file name
        flag: -prefix %s, position: -1
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
polort: (an integer (int or long))
        Remove polynomials up to and including degree pp.
         ++ Default value is 2.
         ++ It makes no sense to use a value of pp greater than
         2, if you are bandpassing out the lower frequencies!
         ++ For catenated datasets, each run gets a separate set
         set of pp+1 Legendre polynomial regressors.
         ++ Use of -polort -1 is not advised (if data mean != 0),
         even if -ort contains constant terms, as all means are
         removed.
        flag: -polort %d
stopband: (a tuple of the form: (a float, a float))
        Remove all frequencies in the range
        flag: -stopband %g %g
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">output</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-tshift"></span></div>
</div>
<div class="section" id="tshift">
<span id="index-32"></span><h2>TShift<a class="headerlink" href="#tshift" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L2634">Link to code</a></p>
<p>Wraps command <strong>3dTshift</strong></p>
<p>Shifts voxel time series from input so that seperate slices are aligned
to the same temporal origin.</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dTshift.html">3dTshift Documentation.</a></p>
<div class="section" id="id35">
<h3>Examples<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<p>Slice timing details may be specified explicitly via the <code class="docutils literal notranslate"><span class="pre">slice_timing</span></code>
input:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TR</span> <span class="o">=</span> <span class="mf">2.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">TShift</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">tzero</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">tr</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%.1f</span><span class="s1">s&#39;</span> <span class="o">%</span> <span class="n">TR</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">slice_timing</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span> <span class="o">/</span> <span class="n">TR</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dTshift -prefix functional_tshift -tpattern @slice_timing.1D -TR 2.5s -tzero 0.0 functional.nii&#39;</span>
</pre></div>
</div>
<p>When the <code class="docutils literal notranslate"><span class="pre">slice_timing</span></code> input is used, the <code class="docutils literal notranslate"><span class="pre">timing_file</span></code> output is populated,
in this case with the generated file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">_list_outputs</span><span class="p">()[</span><span class="s1">&#39;timing_file&#39;</span><span class="p">]</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&#39;.../slice_timing.1D&#39;</span>
</pre></div>
</div>
<p>This method creates a <code class="docutils literal notranslate"><span class="pre">slice_timing.1D</span></code> file to be passed to <code class="docutils literal notranslate"><span class="pre">3dTshift</span></code>.
A pre-existing slice-timing file may be used in the same way:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">TShift</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">tzero</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">tr</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%.1f</span><span class="s1">s&#39;</span> <span class="o">%</span> <span class="n">TR</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">slice_timing</span> <span class="o">=</span> <span class="s1">&#39;slice_timing.1D&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dTshift -prefix functional_tshift -tpattern @slice_timing.1D -TR 2.5s -tzero 0.0 functional.nii&#39;</span>
</pre></div>
</div>
<p>When a pre-existing file is provided, <code class="docutils literal notranslate"><span class="pre">timing_file</span></code> is simply passed through.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">_list_outputs</span><span class="p">()[</span><span class="s1">&#39;timing_file&#39;</span><span class="p">]</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&#39;.../slice_timing.1D&#39;</span>
</pre></div>
</div>
<p>Alternatively, pre-specified slice timing patterns may be specified with the
<code class="docutils literal notranslate"><span class="pre">tpattern</span></code> input.
For example, to specify an alternating, ascending slice timing pattern:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">TShift</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">tzero</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">tr</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%.1f</span><span class="s1">s&#39;</span> <span class="o">%</span> <span class="n">TR</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">tpattern</span> <span class="o">=</span> <span class="s1">&#39;alt+z&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dTshift -prefix functional_tshift -tpattern alt+z -TR 2.5s -tzero 0.0 functional.nii&#39;</span>
</pre></div>
</div>
<p>For backwards compatibility, <code class="docutils literal notranslate"><span class="pre">tpattern</span></code> may also take filenames prefixed
with <code class="docutils literal notranslate"><span class="pre">&#64;</span></code>.
However, in this case, filenames are not validated, so this usage will be
deprecated in future versions of Nipype.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">TShift</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">tzero</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">tr</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%.1f</span><span class="s1">s&#39;</span> <span class="o">%</span> <span class="n">TR</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">tpattern</span> <span class="o">=</span> <span class="s1">&#39;@slice_timing.1D&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dTshift -prefix functional_tshift -tpattern @slice_timing.1D -TR 2.5s -tzero 0.0 functional.nii&#39;</span>
</pre></div>
</div>
<p>In these cases, <code class="docutils literal notranslate"><span class="pre">timing_file</span></code> is undefined.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tshift</span><span class="o">.</span><span class="n">_list_outputs</span><span class="p">()[</span><span class="s1">&#39;timing_file&#39;</span><span class="p">]</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&lt;undefined&gt;</span>
</pre></div>
</div>
<p>In any configuration, the interface may be run as usual:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">tshift</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input file to 3dTshift
        flag: %s, position: -1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
ignore: (an integer (int or long))
        ignore the first set of points specified
        flag: -ignore %s
interp: (&#39;Fourier&#39; or &#39;linear&#39; or &#39;cubic&#39; or &#39;quintic&#39; or &#39;heptic&#39;)
        different interpolation methods (see 3dTshift for details) default =
        Fourier
        flag: -%s
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
out_file: (a file name)
        output image file name
        flag: -prefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
rlt: (a boolean)
        Before shifting, remove the mean and linear trend
        flag: -rlt
rltplus: (a boolean)
        Before shifting, remove the mean and linear trend and later put back
        the mean
        flag: -rlt+
slice_timing: (an existing file name or a list of items which are a
         float)
        time offsets from the volume acquisition onset for each slice
        flag: -tpattern @%s
        mutually_exclusive: tpattern
tpattern: (&#39;alt+z&#39; or &#39;altplus&#39; or &#39;alt+z2&#39; or &#39;alt-z&#39; or &#39;altminus&#39;
         or &#39;alt-z2&#39; or &#39;seq+z&#39; or &#39;seqplus&#39; or &#39;seq-z&#39; or &#39;seqminus&#39; or a
         unicode string)
        use specified slice time pattern rather than one in header
        flag: -tpattern %s
        mutually_exclusive: slice_timing
tr: (a unicode string)
        manually set the TR. You can attach suffix &quot;s&quot; for seconds or &quot;ms&quot;
        for milliseconds.
        flag: -TR %s
tslice: (an integer (int or long))
        align each slice to time offset of given slice
        flag: -slice %s
        mutually_exclusive: tzero
tzero: (a float)
        align each slice to given time offset
        flag: -tzero %s
        mutually_exclusive: tslice
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>out_file: (an existing file name)
        output file
timing_file: (a file name)
        AFNI formatted timing file, if ``slice_timing`` is a list
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-volreg"></span></div>
</div>
<div class="section" id="volreg">
<span id="index-33"></span><h2>Volreg<a class="headerlink" href="#volreg" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L2808">Link to code</a></p>
<p>Wraps command <strong>3dvolreg</strong></p>
<p>Register input volumes to a base volume using AFNI 3dvolreg command</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dvolreg.html">3dvolreg Documentation.</a></p>
<div class="section" id="id36">
<h3>Examples<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">volreg</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Volreg</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">volreg</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">volreg</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="s1">&#39;-Fourier -twopass&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">volreg</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">zpad</span> <span class="o">=</span> <span class="mi">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">volreg</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">outputtype</span> <span class="o">=</span> <span class="s1">&#39;NIFTI&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">volreg</span><span class="o">.</span><span class="n">cmdline</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&#39;3dvolreg -Fourier -twopass -1Dfile functional.1D -1Dmatrix_save functional.aff12.1D -prefix functional_volreg.nii -zpad 4 -maxdisp1D functional_md.1D functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">volreg</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">volreg</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Volreg</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">volreg</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">volreg</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">interp</span> <span class="o">=</span> <span class="s1">&#39;cubic&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">volreg</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">volreg</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">zpad</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">volreg</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">basefile</span> <span class="o">=</span> <span class="s1">&#39;functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">volreg</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">out_file</span> <span class="o">=</span> <span class="s1">&#39;rm.epi.volreg.r1&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">volreg</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">oned_file</span> <span class="o">=</span> <span class="s1">&#39;dfile.r1.1D&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">volreg</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">oned_matrix_save</span> <span class="o">=</span> <span class="s1">&#39;mat.r1.tshift+orig.1D&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">volreg</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dvolreg -cubic -1Dfile dfile.r1.1D -1Dmatrix_save mat.r1.tshift+orig.1D -prefix rm.epi.volreg.r1 -verbose -base functional.nii -zpad 1 -maxdisp1D functional_md.1D functional.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">volreg</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input file to 3dvolreg
        flag: %s, position: -1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
basefile: (an existing file name)
        base file for registration
        flag: -base %s, position: -6
copyorigin: (a boolean)
        copy base file origin coords to output
        flag: -twodup
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
in_weight_volume: (a tuple of the form: (an existing file name, an
         integer (int or long)) or an existing file name)
        weights for each voxel specified by a file with an optional volume
        number (defaults to 0)
        flag: -weight &#39;%s[%d]&#39;
interp: (&#39;Fourier&#39; or &#39;cubic&#39; or &#39;heptic&#39; or &#39;quintic&#39; or &#39;linear&#39;)
        spatial interpolation methods [default = heptic]
        flag: -%s
md1d_file: (a file name)
        max displacement output file
        flag: -maxdisp1D %s, position: -4
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
oned_file: (a file name)
        1D movement parameters output file
        flag: -1Dfile %s
oned_matrix_save: (a file name)
        Save the matrix transformation
        flag: -1Dmatrix_save %s
out_file: (a file name)
        output image file name
        flag: -prefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
timeshift: (a boolean)
        time shift to mean slice time offset
        flag: -tshift 0
verbose: (a boolean)
        more detailed description of the process
        flag: -verbose
zpad: (an integer (int or long))
        Zeropad around the edges by &#39;n&#39; voxels during rotations
        flag: -zpad %d, position: -5
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">md1d_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="nb">max</span> <span class="n">displacement</span> <span class="n">info</span> <span class="n">file</span>
<span class="n">oned_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">movement</span> <span class="n">parameters</span> <span class="n">info</span> <span class="n">file</span>
<span class="n">oned_matrix_save</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">matrix</span> <span class="n">transformation</span> <span class="kn">from</span> <span class="nn">base</span> <span class="n">to</span> <span class="nb">input</span>
<span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">registered</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
<span class="target" id="nipype-interfaces-afni-preprocess-warp"></span></div>
</div>
<div class="section" id="warp">
<span id="index-34"></span><h2>Warp<a class="headerlink" href="#warp" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/93c475b/nipype/interfaces/afni/preprocess.py#L2906">Link to code</a></p>
<p>Wraps command <strong>3dWarp</strong></p>
<p>Use 3dWarp for spatially transforming a dataset</p>
<p>For complete details, see the <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dWarp.html">3dWarp Documentation.</a></p>
<div class="section" id="id37">
<h3>Examples<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nipype.interfaces</span> <span class="k">import</span> <span class="n">afni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">warp</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Warp</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">warp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;structural.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">warp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">deoblique</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">warp</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">out_file</span> <span class="o">=</span> <span class="s1">&#39;trans.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">warp</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dWarp -deoblique -prefix trans.nii.gz structural.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">warp</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">warp_2</span> <span class="o">=</span> <span class="n">afni</span><span class="o">.</span><span class="n">Warp</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">warp_2</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;structural.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">warp_2</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">newgrid</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">warp_2</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">out_file</span> <span class="o">=</span> <span class="s1">&#39;trans.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">warp_2</span><span class="o">.</span><span class="n">cmdline</span>
<span class="go">&#39;3dWarp -newgrid 1.000000 -prefix trans.nii.gz structural.nii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">warp_2</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Mandatory]
in_file: (an existing file name)
        input file to 3dWarp
        flag: %s, position: -1

[Optional]
args: (a unicode string)
        Additional parameters to the command
        flag: %s
deoblique: (a boolean)
        transform dataset from oblique to cardinal
        flag: -deoblique
environ: (a dictionary with keys which are a bytes or None or a value
         of class &#39;str&#39; and with values which are a bytes or None or a value
         of class &#39;str&#39;, nipype default value: {})
        Environment variables
gridset: (an existing file name)
        copy grid of specified dataset
        flag: -gridset %s
interp: (&#39;linear&#39; or &#39;cubic&#39; or &#39;NN&#39; or &#39;quintic&#39;)
        spatial interpolation methods [default = linear]
        flag: -%s
matparent: (an existing file name)
        apply transformation from 3dWarpDrive
        flag: -matparent %s
mni2tta: (a boolean)
        transform dataset from MNI152 to Talaraich
        flag: -mni2tta
newgrid: (a float)
        specify grid of this size (mm)
        flag: -newgrid %f
num_threads: (an integer (int or long), nipype default value: 1)
        set number of threads
oblique_parent: (an existing file name)
        Read in the oblique transformation matrix from an oblique dataset
        and make cardinal dataset oblique to match
        flag: -oblique_parent %s
out_file: (a file name)
        output image file name
        flag: -prefix %s
outputtype: (&#39;NIFTI&#39; or &#39;AFNI&#39; or &#39;NIFTI_GZ&#39;)
        AFNI output filetype
save_warp: (a boolean)
        save warp as .mat file
        requires: verbose
tta2mni: (a boolean)
        transform dataset from Talairach to MNI152
        flag: -tta2mni
verbose: (a boolean)
        Print out some information along the way.
        flag: -verb
zpad: (an integer (int or long))
        pad input dataset with N planes of zero on all sides.
        flag: -zpad %d
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_file</span><span class="p">:</span> <span class="p">(</span><span class="n">an</span> <span class="n">existing</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">Warped</span> <span class="n">file</span><span class="o">.</span>
<span class="n">warp_file</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">warp</span> <span class="n">transform</span> <span class="o">.</span><span class="n">mat</span> <span class="n">file</span>
</pre></div>
</div>
<p>References::
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{Cox1996">‘<span>&#64;</span>article{Cox1996</a>,author={R.W. Cox},title={AFNI: software for analysis and visualization of functional magnetic resonance neuroimages},journal={Computers and Biomedical research},volume={29},number={3},pages={162-173},year={1996},}’, key=’Cox1996’)
BibTeX(<a class="reference external" href="mailto:'&#37;&#52;&#48;article{CoxHyde1997">‘<span>&#64;</span>article{CoxHyde1997</a>,author={R.W. Cox and J.S. Hyde},title={Software tools for analysis and visualization of fMRI data},journal={NMR in Biomedicine},volume={10},number={45},pages={171-178},year={1997},}’, key=’CoxHyde1997’)</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2009-18, Neuroimaging in Python team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1.
    </div>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
</div>

  </body>
</html>